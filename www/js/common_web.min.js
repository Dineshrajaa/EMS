function showWait(){$.mobile.loading("show",{text:"Please wait",textVisible:!0,theme:"b",textonly:!1,html:""})}function hideWait(){$.mobile.loading("hide")}function routing(e,t,i,n,r,a){window.location.href=e}function deleteLocalStorage(e){for(var t=0;t<e.length;t++)localStorage.removeItem(e[t])}function toast(e){new $.nd2Toast({message:e,action:{},ttl:3e3})}function logIn(e,t){if(e.length>0&&t.length>0){showWait();var i=serviceUrl+"Account/AuthenticateUser",n=new Object;n.username=e,n.password=t,n.isWebApp=!1,n.deviceId=localStorage.pushRegID||"1234",n.deviceTypeId=1,$.ajax({type:"GET",url:i,data:n,async:!1,success:function(e){if(hideWait(),e.IsSuccessful){var t=JSON.stringify(e.Result);localStorage.setItem("userSession",t),toast("Sign In Successful")}else switch(e.MessageType){case 10:$("#statusMsg").addClass("(pending)"),$("#statusMsg").text("(Applicant login pending)");break;case 5:$("#statusMsg").addClass("(declined)"),$("#statusMsg").text("(Applicant login declined)");break;default:$("#statusMsg").text(""),toast("Incorrect username or pin")}},error:function(e){hideWait(),toast("Some Error Occoured.")}})}else 0===e.length?(toast("Please enter Username"),$("#txtUserName").focus()):0===t.length&&(toast("Please enter PIN"),$("#txtPassword").focus())}function doLogout(){localStorage.removeItem("userSession"),window.location.href="index.html",unsubscribePush()}function redirect(e){showWait(),window.location.href=e}function navigatePage(e){$(":mobile-pagecontainer").pagecontainer("change",e)}function GetAssignJob(){showWait();var e=localStorage.getItem("userSession"),t=JSON.parse(e),i=serviceUrl+"Account/GetJobAssignedByUserId",n=new Object;n.userId=t.ID,$.ajax({type:"GET",url:i,data:n,async:!1,success:function(e){if(e.IsSuccessful){if(e.Result){var t=e.Result;$("#spnCompany").html(t.BusinessName),$("#spnJobNumber").html(t.Number),$("#spnClient").html(t.Client),$("#spnProject").html(t.Location),$("#spnProjAddress").html(t.LocationAdress),$("#spnTrade").html(t.TradeClassification),$("#spnStartDate").html(t.StartDateStr),$("#spnMessage").html(t.Message),$("#spnDesc").html(t.Name),$("#spnContract").html(t.ContractType)}}else $("#currentJob").html(""),$("#currentJob").append("<h4>There are no current jobs</h4>")},error:function(e){hideWait(),toast("Network Error")}})}function GetAllAssignedPost(){showWait();var e=localStorage.getItem("userSession"),t=JSON.parse(e),i=serviceUrl+"Account/GetAssignedPostsByUserId",n=new Object;n.userId=t.ID,$.ajax({type:"GET",url:i,data:n,async:!1,success:function(e){hideWait()},error:function(e){hideWait(),toast("Network Error")}})}function GetPostDetailBy(e){showWait();var t=serviceUrl+"Account/GetPostById",i=new Object;i.postId=e,$.ajax({type:"GET",url:t,data:i,async:!1,success:function(e){hideWait()},error:function(e){hideWait(),toast("Network Error")}})}function fillProfilePicture(){var e=localStorage.getItem("userSession");if(e&&"undefined"!=e&&null!=e){e=JSON.parse(e),""!=e.ProfilePicture&&-1==e.ProfilePicture.indexOf("data:image/jpeg;base64,")&&(e.ProfilePicture="data:image/jpeg;base64,"+e.ProfilePicture);var t=""==e.ProfilePicture?"img/avtar.png":e.ProfilePicture;console.warn("profileImage:"+t),$("#imgUserImage").attr("src",t)}}function unsubscribePush(){var e=PushNotification.init({android:{senderID:"739681536553"},ios:{alert:"true",badge:"true",sound:"true"},windows:{}});e.unregister(function(){console.log("successfully unsubscribed")},function(){console.log("error")})}function formatDate(e){var t=new Date(e);console.warn(t);var i=t.getDate()<10?"0"+t.getDate():t.getDate(),n=parseInt(t.getMonth())+1,r=10>n?"0"+n:n,a=i+"-"+r+"-"+t.getFullYear();return a}function registerPush(){try{window.push=PushNotification.init({android:{senderID:"739681536553",forceShow:!0},ios:{alert:"true",badge:"true",sound:"true",clearBadge:"true"},windows:{}})}catch(e){alert(e)}}function jAlert(e){var t=document.createElement("IFRAME");t.setAttribute("src",""),document.documentElement.appendChild(t),window.frames[0].window.alert(e),t.parentNode.removeChild(t),t=null}var serviceUrl="http://52.63.234.33/emsapi/api/";$(document).ajaxStart(function(){showWait()}),$(document).ajaxComplete(function(){hideWait()}),$(document).ajaxError(function(){hideWait()}),$(".panelBtn").on("click",function(){$("#profileDetailsPage,#avatarPage").unblock()}),$(document).bind("mobileinit",function(){$.extend($.mobile,{defaultPageTransition:"none"}),$.mobile.defaultPageTransition="none",$.mobile.defaultDialogTransition="none"}),$(document).ajaxStart(function(){showWait()}).ajaxStop(function(){hideWait()}),Date.prototype.getFormattedTime=function(){var e=0==this.getHours()?"12":this.getHours()>12?this.getHours()-12:this.getHours(),t=(this.getMinutes()<10?"0":"")+this.getMinutes(),i=this.getHours()<12?"AM":"PM",n=e+":"+t+" "+i;return n},Date.prototype.getFormattedDateInddMMYY=function(){var e=parseInt(parseInt(this.getMonth())+1)<10?"0"+parseInt(parseInt(this.getMonth())+1):parseInt(parseInt(this.getMonth())+1),t=parseInt(this.getDate())<10?"0"+this.getDate():this.getDate(),i=this.getFullYear();return t+"/"+e+"/"+i},$(document).on("pageinit","#profileDetailsPage,#avatarPage",function(){$("#cameraTypeList").on("panelclose",function(e,t){$("#profileDetailsPage,#avatarPage").unblock()})}),document.addEventListener("deviceready",function(){},!0);