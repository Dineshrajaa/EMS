!function(e){function r(e,t,i){e.rules[t]=i,e.message&&(e.messages[t]=e.message)}function a(e){return e.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function o(e){return e.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function s(e){return e.substr(0,e.lastIndexOf(".")+1)}function l(e,t){return 0===e.indexOf("*.")&&(e=e.replace("*.",t)),e}function c(t,i){var n=e(this).find("[data-valmsg-for='"+o(i[0].name)+"']"),r=e.parseJSON(n.attr("data-valmsg-replace"))!==!1;n.removeClass("field-validation-valid").addClass("field-validation-error"),t.data("unobtrusiveContainer",n),r?(n.empty(),t.removeClass("input-validation-error").appendTo(n)):t.hide()}function u(t,i){var n=e(this).find("[data-valmsg-summary=true]"),r=n.find("ul");r&&r.length&&i.errorList.length&&(r.empty(),n.addClass("validation-summary-errors").removeClass("validation-summary-valid"),e.each(i.errorList,function(){e("<li />").html(this.message).appendTo(r)}))}function d(t){var i=t.data("unobtrusiveContainer"),n=e.parseJSON(i.attr("data-valmsg-replace"));i&&(i.addClass("field-validation-valid").removeClass("field-validation-error"),t.removeData("unobtrusiveContainer"),n&&i.empty())}function f(t){var i=e(this);i.data("validator").resetForm(),i.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors"),i.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer")}function h(t){var i=e(t),r=i.data(n),a=e.proxy(f,t);return r||(r={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:e.proxy(c,t),invalidHandler:e.proxy(u,t),messages:{},rules:{},success:e.proxy(d,t)},attachValidation:function(){i.unbind("reset."+n,a).bind("reset."+n,a).validate(this.options)},validate:function(){return i.validate(),i.valid()}},i.data(n,r)),r}var i,t=e.validator,n="unobtrusiveValidation";t.unobtrusive={adapters:[],parseElement:function(t,i){var a,o,s,n=e(t),r=n.parents("form")[0];r&&(a=h(r),a.options.rules[t.name]=o={},a.options.messages[t.name]=s={},e.each(this.adapters,function(){var i="data-val-"+this.name,a=n.attr(i),l={};void 0!==a&&(i+="-",e.each(this.params,function(){l[this]=n.attr(i+this)}),this.adapt({element:t,form:r,message:a,params:l,rules:o,messages:s}))}),e.extend(o,{__dummy__:!0}),i||a.attachValidation())},parse:function(i){var n=e(i).parents("form").andSelf().add(e(i).find("form")).filter("form");e(i).find(":input[data-val=true]").each(function(){t.unobtrusive.parseElement(this,!0)}),n.each(function(){var e=h(this);e&&e.attachValidation()})}},i=t.unobtrusive.adapters,i.add=function(e,t,i){return i||(i=t,t=[]),this.push({name:e,params:t,adapt:i}),this},i.addBool=function(e,t){return this.add(e,function(i){r(i,t||e,!0)})},i.addMinMax=function(e,t,i,n,a,o){return this.add(e,[a||"min",o||"max"],function(e){var a=e.params.min,o=e.params.max;a&&o?r(e,n,[a,o]):a?r(e,t,a):o&&r(e,i,o)})},i.addSingleVal=function(e,t,i){return this.add(e,[t||"val"],function(n){r(n,i||e,n.params[t])})},t.addMethod("__dummy__",function(e,t,i){return!0}),t.addMethod("regex",function(e,t,i){var n;return this.optional(t)?!0:(n=new RegExp(i).exec(e),n&&0===n.index&&n[0].length===e.length)}),t.addMethod("nonalphamin",function(e,t,i){var n;return i&&(n=e.match(/\W/g),n=n&&n.length>=i),n}),i.addSingleVal("accept","exts").addSingleVal("regex","pattern"),i.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url"),i.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range"),i.add("equalto",["other"],function(t){var i=s(t.element.name),n=t.params.other,a=l(n,i),c=e(t.form).find(":input[name='"+o(a)+"']")[0];r(t,"equalTo",c)}),i.add("required",function(e){("INPUT"!==e.element.tagName.toUpperCase()||"CHECKBOX"!==e.element.type.toUpperCase())&&r(e,"required",!0)}),i.add("remote",["url","type","additionalfields"],function(t){var i={url:t.params.url,type:t.params.type||"GET",data:{}},n=s(t.element.name);e.each(a(t.params.additionalfields||t.element.name),function(r,a){var s=l(a,n);i.data[s]=function(){return e(t.form).find(":input[name='"+o(s)+"']").val()}}),r(t,"remote",i)}),i.add("password",["min","nonalphamin","regex"],function(e){e.params.min&&r(e,"minlength",e.params.min),e.params.nonalphamin&&r(e,"nonalphamin",e.params.nonalphamin),e.params.regex&&r(e,"regex",e.params.regex)}),e(function(){t.unobtrusive.parse(document)})}(jQuery);