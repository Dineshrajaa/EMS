!function(e,t){var i=e.mobiscroll,n=i.datetime,r=new Date,a={startYear:r.getFullYear()-100,endYear:r.getFullYear()+1,separator:" ",dateFormat:"DD MM yy",dateOrder:"ddMMyy",timeWheels:"hhiiA",timeFormat:"hh:ii A",dayText:"Day",monthText:"Month",yearText:"Year",hourText:"Hours",minuteText:"Minutes",ampmText:"&nbsp;",secText:"Seconds",nowText:"Now"},o=function(r){function te(e,i,n){return S[i]!==t?+e[S[i]]:N[i]!==t?N[i]:n!==t?n:I[i](M)}function ie(e,t,i,n){e.push({values:i,keys:t,label:n})}function ne(e,t,i,n){return Math.min(n,Math.floor(e/t)*t+i)}function re(e){return T.getYear(e)}function ae(e){return T.getMonth(e)}function oe(e){return T.getDay(e)}function se(e){var t=e.getHours();return t=_&&t>=12?t-12:t,ne(t,q,V,X)}function le(e){return ne(e.getMinutes(),U,Q,Y)}function ce(e){return ne(e.getSeconds(),W,K,G)}function ue(e){return e.getMilliseconds()}function fe(e){return H&&e.getHours()>11?1:0}function de(e){if(null===e)return e;var t=te(e,"y"),i=te(e,"m"),n=Math.min(te(e,"d",1),T.getMaxDayOfMonth(t,i)),r=te(e,"h",0);return T.getDate(t,i,n,te(e,"a",0)?r+12:r,te(e,"i",0),te(e,"s",0),te(e,"u",0))}function he(e,t,i){return Math.floor((i-t)/e)*e+t}function pe(e,t){var i,n,r=!1,a=!1,o=0,s=0;if(z=de(xe(z)),J=de(xe(J)),me(e))return e;if(z>e&&(e=z),e>J&&(e=J),i=e,n=e,2!==t)for(r=me(i);!r&&J>i;)i=new Date(i.getTime()+864e5),r=me(i),o++;if(1!==t)for(a=me(n);!a&&n>z;)n=new Date(n.getTime()-864e5),a=me(n),s++;return 1===t&&r?i:2===t&&a?n:o>=s&&a?n:i}function me(e){return z>e?!1:e>J?!1:ge(e,L)?!0:ge(e,D)?!1:!0}function ge(e,t){var i,n,r;if(t)for(n=0;n<t.length;n++)if(i=t[n],r=i+"",!i.start)if(i.getTime){if(e.getFullYear()==i.getFullYear()&&e.getMonth()==i.getMonth()&&e.getDate()==i.getDate())return!0}else if(r.match(/w/i)){if(r=+r.replace("w",""),r==e.getDay())return!0}else if(r=r.split("/"),r[1]){if(r[0]-1==e.getMonth()&&r[1]==e.getDate())return!0}else if(r[0]==e.getDate())return!0;return!1}function ve(e,t,i,n,r,a,o){var s,l,c;if(e)for(s=0;s<e.length;s++)if(l=e[s],c=l+"",!l.start)if(l.getTime)T.getYear(l)==t&&T.getMonth(l)==i&&(a[T.getDay(l)-1]=o);else if(c.match(/w/i))for(c=+c.replace("w",""),d=c-n;r>d;d+=7)d>=0&&(a[d]=o);else c=c.split("/"),c[1]?c[0]-1==i&&(a[c[1]-1]=o):a[c[0]-1]=o}function ye(i,n,r,a,o,s,l,c,u){var f,d,h,p,m,g,v,y,x,C,$,E,S,N,I,D,L,A,P={},F={h:q,i:U,s:W,a:1},j=T.getDate(o,s,l),H=["a","h","i","s"];i&&(e.each(i,function(e,t){t.start&&(t.apply=!1,f=t.d,d=f+"",h=d.split("/"),f&&(f.getTime&&o==T.getYear(f)&&s==T.getMonth(f)&&l==T.getDay(f)||!d.match(/w/i)&&(h[1]&&l==h[1]&&s==h[0]-1||!h[1]&&l==h[0])||d.match(/w/i)&&j.getDay()==+d.replace("w",""))&&(t.apply=!0,P[j]=!0))}),e.each(i,function(i,a){if(S=0,N=0,$=0,E=t,g=!0,v=!0,I=!1,a.start&&(a.apply||!a.d&&!P[j])){for(p=a.start.split(":"),m=a.end.split(":"),C=0;3>C;C++)p[C]===t&&(p[C]=0),m[C]===t&&(m[C]=59),p[C]=+p[C],m[C]=+m[C];for(p.unshift(p[0]>11?1:0),m.unshift(m[0]>11?1:0),_&&(p[1]>=12&&(p[1]=p[1]-12),m[1]>=12&&(m[1]=m[1]-12)),C=0;n>C;C++)k[C]!==t&&(y=ne(p[C],F[H[C]],b[H[C]],w[H[C]]),x=ne(m[C],F[H[C]],b[H[C]],w[H[C]]),D=0,L=0,A=0,_&&1==C&&(D=p[0]?12:0,L=m[0]?12:0,A=k[0]?12:0),g||(y=0),v||(x=w[H[C]]),(g||v)&&y+D<k[C]+A&&k[C]+A<x+L&&(I=!0),k[C]!=y&&(g=!1),k[C]!=x&&(v=!1));if(!u)for(C=n+1;4>C;C++)p[C]>0&&(S=F[r]),m[C]<w[H[C]]&&(N=F[r]);I||(y=ne(p[n],F[r],b[r],w[r])+S,x=ne(m[n],F[r],b[r],w[r])-N,g&&($=we(c,y,w[r],0)),v&&(E=we(c,x,w[r],1))),(g||v||I)&&(u?e(".dw-li",c).slice($,E).addClass("dw-v"):e(".dw-li",c).slice($,E).removeClass("dw-v"))}}))}function be(t,i){return e(".dw-li",t).index(e('.dw-li[data-val="'+i+'"]',t))}function we(t,i,n,r){return 0>i?0:i>n?e(".dw-li",t).length:be(t,i)+r}function xe(i,n){var r=[];return null===i||i===t?i:(e.each(["y","m","d","a","h","i","s","u"],function(e,a){S[a]!==t&&(r[S[a]]=I[a](i)),n&&(N[a]=I[a](i))}),r)}function Te(e){var t,i,n,r=[];if(e){for(t=0;t<e.length;t++)if(i=e[t],i.start&&i.start.getTime)for(n=new Date(i.start);n<=i.end;)r.push(new Date(n.getFullYear(),n.getMonth(),n.getDate())),n.setDate(n.getDate()+1);else r.push(i);return r}return e}var l,o=e(this),s={};if(o.is("input")){switch(o.attr("type")){case"date":l="yy-mm-dd";break;case"datetime":l="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":l="yy-mm-ddTHH:ii:ss";break;case"month":l="yy-mm",s.dateOrder="mmyy";break;case"time":l="HH:ii:ss"}var c=o.attr("min"),u=o.attr("max");c&&(s.minDate=n.parseDate(l,c)),u&&(s.maxDate=n.parseDate(l,u))}var f,d,h,p,m,g,v,y,b,w,x=e.extend({},r.settings),T=e.extend(r.settings,i.datetime.defaults,a,s,x),C=0,k=[],$=[],E=[],S={},N={},I={y:re,m:ae,d:oe,h:se,i:le,s:ce,u:ue,a:fe},D=T.invalid,L=T.valid,A=T.preset,P=T.dateOrder,F=T.timeWheels,j=P.match(/D/),H=F.match(/a/i),_=F.match(/h/),O="datetime"==A?T.dateFormat+T.separator+T.timeFormat:"time"==A?T.timeFormat:T.dateFormat,M=new Date,R=T.steps||{},q=R.hour||T.stepHour||1,U=R.minute||T.stepMinute||1,W=R.second||T.stepSecond||1,B=R.zeroBased,z=T.minDate||new Date(T.startYear,0,1),J=T.maxDate||new Date(T.endYear,11,31,23,59,59),V=B?0:z.getHours()%q,Q=B?0:z.getMinutes()%U,K=B?0:z.getSeconds()%W,X=he(q,V,_?11:23),Y=he(U,Q,59),G=he(U,Q,59);if(l=l||O,A.match(/date/i)){for(e.each(["y","m","d"],function(e,t){f=P.search(new RegExp(t,"i")),f>-1&&E.push({o:f,v:t})}),E.sort(function(e,t){return e.o>t.o?1:-1}),e.each(E,function(e,t){S[t.v]=e}),m=[],d=0;3>d;d++)if(d==S.y){for(C++,p=[],h=[],g=T.getYear(z),v=T.getYear(J),f=g;v>=f;f++)h.push(f),p.push((P.match(/yy/i)?f:(f+"").substr(2,2))+(T.yearSuffix||""));ie(m,h,p,T.yearText)}else if(d==S.m){for(C++,p=[],h=[],f=0;12>f;f++){var Z=P.replace(/[dy]/gi,"").replace(/mm/,(9>f?"0"+(f+1):f+1)+(T.monthSuffix||"")).replace(/m/,f+1+(T.monthSuffix||""));h.push(f),p.push(Z.match(/MM/)?Z.replace(/MM/,'<span class="dw-mon">'+T.monthNames[f]+"</span>"):Z.replace(/M/,'<span class="dw-mon">'+T.monthNamesShort[f]+"</span>"))}ie(m,h,p,T.monthText)}else if(d==S.d){for(C++,p=[],h=[],f=1;32>f;f++)h.push(f),p.push((P.match(/dd/i)&&10>f?"0"+f:f)+(T.daySuffix||""));ie(m,h,p,T.dayText)}$.push(m)}if(A.match(/time/i)){for(y=!0,E=[],e.each(["h","i","s","a"],function(e,t){e=F.search(new RegExp(t,"i")),e>-1&&E.push({o:e,v:t})}),E.sort(function(e,t){return e.o>t.o?1:-1}),e.each(E,function(e,t){S[t.v]=C+e}),m=[],d=C;C+4>d;d++)if(d==S.h){for(C++,p=[],h=[],f=V;(_?12:24)>f;f+=q)h.push(f),p.push(_&&0===f?12:F.match(/hh/i)&&10>f?"0"+f:f);ie(m,h,p,T.hourText)}else if(d==S.i){for(C++,p=[],h=[],f=Q;60>f;f+=U)h.push(f),p.push(F.match(/ii/)&&10>f?"0"+f:f);ie(m,h,p,T.minuteText)}else if(d==S.s){for(C++,p=[],h=[],f=K;60>f;f+=W)h.push(f),p.push(F.match(/ss/)&&10>f?"0"+f:f);ie(m,h,p,T.secText)}else if(d==S.a){C++;var ee=F.match(/A/);ie(m,[0,1],ee?[T.amText.toUpperCase(),T.pmText.toUpperCase()]:[T.amText,T.pmText],T.ampmText)}$.push(m)}return r.getVal=function(e){return r._hasValue||e?de(r.getArrayVal(e)):null},r.setDate=function(e,t,i,n,a){r.setArrayVal(xe(e),t,a,n,i)},r.getDate=r.getVal,r.format=O,r.order=S,r.handlers.now=function(){r.setDate(new Date,!1,.3,!0,!0)},r.buttons.now={text:T.nowText,handler:"now"},D=Te(D),L=Te(L),b={y:z.getFullYear(),m:0,d:1,h:V,i:Q,s:K,a:0},w={y:J.getFullYear(),m:11,d:31,h:X,i:Y,s:G,a:1},{wheels:$,headerText:T.headerText?function(){return n.formatDate(O,de(r.getArrayVal(!0)),T)}:!1,formatValue:function(e){return n.formatDate(l,de(e),T)},parseValue:function(e){return e||(N={}),xe(e?n.parseDate(l,e,T):T.defaultValue||new Date,!!e&&!!e.getTime)},validate:function(i,n,a,o){var s=pe(de(r.getArrayVal(!0)),o),l=xe(s),c=te(l,"y"),u=te(l,"m"),f=!0,d=!0;e.each(["y","m","d","a","h","i","s"],function(n,r){if(S[r]!==t){var a=b[r],o=w[r],s=31,h=te(l,r),p=e(".dw-ul",i).eq(S[r]);if("d"==r&&(s=T.getMaxDayOfMonth(c,u),o=s,j&&e(".dw-li",p).each(function(){var t=e(this),i=t.data("val"),n=T.getDate(c,u,i).getDay(),r=P.replace(/[my]/gi,"").replace(/dd/,(10>i?"0"+i:i)+(T.daySuffix||"")).replace(/d/,i+(T.daySuffix||""));e(".dw-i",t).html(r.match(/DD/)?r.replace(/DD/,'<span class="dw-day">'+T.dayNames[n]+"</span>"):r.replace(/D/,'<span class="dw-day">'+T.dayNamesShort[n]+"</span>"))})),f&&z&&(a=I[r](z)),d&&J&&(o=I[r](J)),"y"!=r){var m=be(p,a),g=be(p,o);e(".dw-li",p).removeClass("dw-v").slice(m,g+1).addClass("dw-v"),"d"==r&&e(".dw-li",p).removeClass("dw-h").slice(s).addClass("dw-h")}if(a>h&&(h=a),h>o&&(h=o),f&&(f=h==a),d&&(d=h==o),"d"==r){var v=T.getDate(c,u,1).getDay(),y={};ve(D,c,u,v,s,y,1),ve(L,c,u,v,s,y,0),e.each(y,function(t,i){i&&e(".dw-li",p).eq(t).removeClass("dw-v")})}}}),y&&e.each(["a","h","i","s"],function(n,a){var s=te(l,a),f=te(l,"d"),d=e(".dw-ul",i).eq(S[a]);S[a]!==t&&(ye(D,n,a,l,c,u,f,d,0),ye(L,n,a,l,c,u,f,d,1),k[n]=+r.getValidCell(s,d,o).val)}),r._tempWheelArray=l}}};e.each(["date","time","datetime"],function(e,t){i.presets.scroller[t]=o})}(jQuery);