!function(e,t,i,n){var r=e.mobiscroll,a=r.classes,s=r.util,o=s.jsPrefix,l=s.has3d,c=s.hasFlex,u=s.getCoord,d=s.constrain,f=s.testTouch;r.presetShort("scroller","Scroller",!1),a.Scroller=function(t,r,h){function R(t){!f(t,this)||L||C||m||K(this)||(t.preventDefault(),t.stopPropagation(),g="clickpick"!=w.mode,L=e(".dw-ul",this),Y(L),k=H[A]!==n,N=k?Z(L):O[A],$=u(t,"Y"),E=new Date,S=$,te(L,A,N,.001),g&&L.closest(".dwwl").addClass("dwa"),"mousedown"===t.type&&e(i).on("mousemove",q).on("mouseup",U))}function q(e){L&&g&&(e.preventDefault(),e.stopPropagation(),S=u(e,"Y"),(Math.abs(S-$)>3||k)&&(te(L,A,d(N+($-S)/v,I-1,D+1)),k=!0))}function U(t){if(L){var s,o,n=new Date-E,r=d(Math.round(N+($-S)/v),I-1,D+1),a=r,c=L.offset().top;if(t.stopPropagation(),"mouseup"===t.type&&e(i).off("mousemove",q).off("mouseup",U),l&&300>n?(s=(S-$)/n,o=s*s/w.speedUnit,0>S-$&&(o=-o)):o=S-$,k)a=d(Math.round(N-o/v),I,D),n=s?Math.max(.1,Math.abs((a-r)/s)*w.timeUnit):.1;else{var u=Math.floor((S-c)/v),f=e(e(".dw-li",L)[u]),h=f.hasClass("dw-v"),p=g;if(n=.1,T("onValueTap",[f])!==!1&&h?a=u:p=!0,p&&h&&(f.addClass("dw-hl"),setTimeout(function(){f.removeClass("dw-hl")},100)),!y&&(w.confirmOnTap===!0||w.confirmOnTap[A])&&f.hasClass("dw-sel"))return F.select(),void(L=!1)}g&&re(L,A,a,0,n,!0),L=!1}}function W(t){m=e(this),f(t,this)&&Q(t,m.closest(".dwwl"),m.hasClass("dwwbp")?ae:se),"mousedown"===t.type&&e(i).on("mouseup",B)}function B(t){m=null,C&&(clearInterval(_),C=!1),"mouseup"===t.type&&e(i).off("mouseup",B)}function z(t){38==t.keyCode?Q(t,e(this),se):40==t.keyCode&&Q(t,e(this),ae)}function V(){C&&(clearInterval(_),C=!1)}function J(t){if(!K(this)){t.preventDefault(),t=t.originalEvent||t;var i=t.deltaY||t.wheelDelta||t.detail,n=e(".dw-ul",this);Y(n),te(n,A,d(((0>i?-20:20)-b[A])/v,I-1,D+1)),clearTimeout(x),x=setTimeout(function(){re(n,A,Math.round(O[A]),i>0?1:2,.1)},200)}}function Q(e,t,i){if(e.stopPropagation(),e.preventDefault(),!C&&!K(t)&&!t.hasClass("dwa")){C=!0;var n=t.find(".dw-ul");Y(n),clearInterval(_),_=setInterval(function(){i(n)},w.delay),i(n)}}function K(t){if(e.isArray(w.readonly)){var i=e(".dwwl",p).index(t);return w.readonly[i]}return w.readonly}function X(t){var i='<div class="dw-bf">',n=M[t],r=1,a=n.labels||[],s=n.values||[],o=n.keys||s;return e.each(s,function(e,t){r%20===0&&(i+='</div><div class="dw-bf">'),i+='<div role="option" aria-selected="false" class="dw-li dw-v" data-val="'+o[e]+'"'+(a[e]?' aria-label="'+a[e]+'"':"")+' style="height:'+v+"px;line-height:"+v+'px;"><div class="dw-i"'+(P>1?' style="line-height:'+Math.round(v/P)+"px;font-size:"+Math.round(v/P*.8)+'px;"':"")+">"+t+"</div></div>",r++}),i+="</div>"}function Y(t){y=t.closest(".dwwl").hasClass("dwwms"),I=e(".dw-li",t).index(e(y?".dw-li":".dw-v",t).eq(0)),D=Math.max(I,e(".dw-li",t).index(e(y?".dw-li":".dw-v",t).eq(-1))-(y?w.rows-("scroller"==w.mode?1:3):0)),A=e(".dw-ul",p).index(t)}function G(e){var i=w.headerText;return i?"function"==typeof i?i.call(t,e):i.replace(/\{value\}/i,e):""}function Z(e){return Math.round(-s.getPosition(e,!0)/v)}function ee(e,t){clearTimeout(H[t]),delete H[t],e.closest(".dwwl").removeClass("dwa")}function te(e,t,i,n,r){var a=-i*v,c=e[0].style;a==b[t]&&H[t]||(b[t]=a,l?(c[o+"Transition"]=s.prefix+"transform "+(n?n.toFixed(3):0)+"s ease-out",c[o+"Transform"]="translate3d(0,"+a+"px,0)"):c.top=a+"px",H[t]&&ee(e,t),n&&r&&(e.closest(".dwwl").addClass("dwa"),H[t]=setTimeout(function(){ee(e,t)},1e3*n)),O[t]=i)}function ie(t,i,n,r,a){var s,o=e('.dw-li[data-val="'+t+'"]',i),l=e(".dw-li",i),c=l.index(o),u=l.length;if(r)Y(i);else if(!o.hasClass("dw-v")){for(var f=o,h=o,p=0,m=0;c-p>=0&&!f.hasClass("dw-v");)p++,f=l.eq(c-p);for(;u>c+m&&!h.hasClass("dw-v");)m++,h=l.eq(c+m);(p>m&&m&&2!==n||!p||0>c-p||1==n)&&h.hasClass("dw-v")?(o=h,c+=m):(o=f,c-=p)}return s=o.hasClass("dw-sel"),a&&(r||(e(".dw-sel",i).removeAttr("aria-selected"),o.attr("aria-selected","true")),e(".dw-sel",i).removeClass("dw-sel"),o.addClass("dw-sel")),{selected:s,v:r?d(c,I,D):c,val:o.hasClass("dw-v")||r?o.attr("data-val"):null}}function ne(t,i,r,a,s){T("validate",[p,i,t,a])!==!1&&(e(".dw-ul",p).each(function(r){var o=e(this),l=o.closest(".dwwl").hasClass("dwwms"),c=r==i||i===n,u=ie(F._tempWheelArray[r],o,a,l,!0),d=u.selected;(!d||c)&&(F._tempWheelArray[r]=u.val,te(o,r,u.v,c?t:.1,c?s:!1))}),T("onValidated",[i]),F._tempValue=w.formatValue(F._tempWheelArray,F),F.live&&(F._hasValue=r||F._hasValue,oe(r,r,0,!0)),F._header.html(G(F._tempValue)),r&&T("onChange",[F._tempValue]))}function re(t,i,n,r,a,s){n=d(n,I,D),F._tempWheelArray[i]=e(".dw-li",t).eq(n).attr("data-val"),te(t,i,n,a,s),setTimeout(function(){ne(a,i,!0,r,s)},10)}function ae(e){var t=O[A]+1;re(e,A,t>D?I:t,1,.1)}function se(e){var t=O[A]-1;re(e,A,I>t?D:t,2,.1)}function oe(e,t,i,n,r){F._isVisible&&!n&&ne(i),F._tempValue=w.formatValue(F._tempWheelArray,F),r||(F._wheelArray=F._tempWheelArray.slice(0),F._value=F._hasValue?F._tempValue:null),e&&(T("onValueFill",[F._hasValue?F._tempValue:"",t]),F._isInput&&j.val(F._hasValue?F._tempValue:""),t&&(F._preventChange=!0,j.change()))}var p,m,g,v,y,b,w,x,T,C,k,$,E,S,N,I,D,L,A,P,_,F=this,j=e(t),H={},O={},M=[];a.Frame.call(this,t,r,!0),F.setVal=F._setVal=function(i,r,a,s,o){F._hasValue=null!==i&&i!==n,F._tempWheelArray=e.isArray(i)?i.slice(0):w.parseValue.call(t,i,F)||[],oe(r,a===n?r:a,o,!1,s)},F.getVal=F._getVal=function(e){var t=F._hasValue||e?F[e?"_tempValue":"_value"]:null;return s.isNumeric(t)?+t:t},F.setArrayVal=F.setVal,F.getArrayVal=function(e){return e?F._tempWheelArray:F._wheelArray},F.setValue=function(e,t,i,n,r){F.setVal(e,t,r,n,i)},F.getValue=F.getArrayVal,F.changeWheel=function(t,i,r){if(p){var a=0,s=t.length;e.each(w.wheels,function(o,l){return e.each(l,function(o,l){return e.inArray(a,t)>-1&&(M[a]=l,e(".dw-ul",p).eq(a).html(X(a)),s--,!s)?(F.position(),ne(i,n,r),!1):void a++}),s?void 0:!1})}},F.getValidCell=ie,F.scroll=te,F._generateContent=function(){var t,i="",r=0;return e.each(w.wheels,function(a,s){i+='<div class="mbsc-w-p dwc'+("scroller"!=w.mode?" dwpm":" dwsc")+(w.showLabel?"":" dwhl")+'"><div class="dwwc"'+(w.maxWidth?"":' style="max-width:600px;"')+">"+(c?"":'<table class="dw-tbl" cellpadding="0" cellspacing="0"><tr>'),e.each(s,function(e,a){M[r]=a,t=a.label!==n?a.label:e,i+="<"+(c?"div":"td")+' class="dwfl" style="'+(w.fixedWidth?"width:"+(w.fixedWidth[r]||w.fixedWidth)+"px;":(w.minWidth?"min-width:"+(w.minWidth[r]||w.minWidth)+"px;":"min-width:"+w.width+"px;")+(w.maxWidth?"max-width:"+(w.maxWidth[r]||w.maxWidth)+"px;":""))+'"><div class="dwwl dwwl'+r+(a.multiple?" dwwms":"")+'">'+("scroller"!=w.mode?'<div class="dwb-e dwwb dwwbp '+(w.btnPlusClass||"")+'" style="height:'+v+"px;line-height:"+v+'px;"><span>+</span></div><div class="dwb-e dwwb dwwbm '+(w.btnMinusClass||"")+'" style="height:'+v+"px;line-height:"+v+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+t+'</div><div tabindex="0" aria-live="off" aria-label="'+t+'" role="listbox" class="dwww"><div class="dww" style="height:'+w.rows*v+'px;"><div class="dw-ul" style="margin-top:'+(a.multiple?"scroller"==w.mode?0:v:w.rows/2*v-v/2)+'px;">',i+=X(r)+'</div></div><div class="dwwo"></div></div><div class="dwwol"'+(w.selectedLineHeight?' style="height:'+v+"px;margin-top:-"+(v/2+(w.selectedLineBorder||0))+'px;"':"")+"></div></div>"+(c?"</div>":"</td>"),r++}),i+=(c?"":"</tr></table>")+"</div></div>"}),i},F._attachEvents=function(e){e.on("keydown",".dwwl",z).on("keyup",".dwwl",V).on("touchstart mousedown",".dwwl",R).on("touchmove",".dwwl",q).on("touchend",".dwwl",U).on("touchstart mousedown",".dwwb",W).on("touchend touchcancel",".dwwb",B),w.mousewheel&&e.on("wheel mousewheel",".dwwl",J)},F._markupReady=function(e){p=e,b={},ne()},F._fillValue=function(){F._hasValue=!0,oe(!0,!0,0,!0)},F._readValue=function(){var e=j.val()||"";""!==e&&(F._hasValue=!0),F._tempWheelArray=F._hasValue&&F._wheelArray?F._wheelArray.slice(0):w.parseValue.call(t,e,F)||[],oe()},F._processSettings=function(){w=F.settings,T=F.trigger,v=w.height,P=w.multiline,F._isLiquid="liquid"===(w.layout||(/top|bottom/.test(w.display)&&1==w.wheels.length?"liquid":"")),w.formatResult&&(w.formatValue=w.formatResult),P>1&&(w.cssClass=(w.cssClass||"")+" dw-ml"),"scroller"!=w.mode&&(w.rows=Math.max(3,w.rows))},F._selectedValues={},h||F.init(r)},a.Scroller.prototype={_hasDef:!0,_hasTheme:!0,_hasLang:!0,_hasPreset:!0,_class:"scroller",_defaults:e.extend({},a.Frame.prototype._defaults,{minWidth:80,height:40,rows:3,multiline:1,delay:300,readonly:!1,showLabel:!0,confirmOnTap:!0,wheels:[],mode:"scroller",preset:"",speedUnit:.0012,timeUnit:.08,formatValue:function(e){return e.join(" ")},parseValue:function(t,i){var o,l,r=[],a=[],s=0;return null!==t&&t!==n&&(r=(t+"").split(" ")),e.each(i.settings.wheels,function(t,i){e.each(i,function(t,i){l=i.keys||i.values,o=l[0],e.each(l,function(e,t){return r[s]==t?(o=t,!1):void 0}),a.push(o),s++})}),a}})},r.themes.scroller=r.themes.frame}(jQuery,window,document);