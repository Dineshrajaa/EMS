function blockIt(){$("#avatarPage").block({message:null})}function fillInAddress(){var e=autocomplete.getPlace();for(var t in componentForm)"route"!=t&&(document.getElementById(t).value="",document.getElementById(t).disabled=!1);for(var i=0;i<e.address_components.length;i++){var n=e.address_components[i].types[0];if(componentForm[n]){if("route"==n){var r=e.address_components[i][componentForm[n]];document.getElementById("street_number").value+=" "+r,document.getElementById("street_number").value=document.getElementById("street_number").value.trim();continue}var r=e.address_components[i][componentForm[n]];document.getElementById(n).value=r}}}function validate(){return isValid=!0,$(".required").each(function(){var e=$(this);""==e.val()?($(e).addClass("error"),isValid=!1):$(e).removeClass("error")}),isValid?void RegisterUser():!1}function validateRegisterFields(e,t){return validatePassword($("#txtPin")),validateConfirmPassword($("#txtCPin")),isValid=!0,$("."+e).each(function(){var e=$(this);""==e.val()?($(e).addClass("error"),isValid=!1):$(e).removeClass("error")}),isValid?$("#txtPin").val()!=$("#txtCPin").val()?void $("#spnError").html("Pin and confirm pin does not match"):($("#spnError").html(""),void("lastpage"!==t&&RegisterUser(t))):!1}function validateEmail(e){if($(e).val().length>0){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return $(e).val().match(t)?($(e).removeClass("error"),$("#spnError").html(""),!0):($(e).addClass("error"),$(e).focus(),!1)}return $(e).addClass("error"),!1}function validatePassword(e){return $(e).val().length>0?$(e).val().length<4?($(e).addClass("error"),$("#spnError").html("Pin length should be equal to 4"),$(e).focus(),!1):($(e).removeClass("error"),$("#spnError").html(""),!0):($(e).addClass("error"),$("#spnError").html("Please enter Pin"),!1)}function validateConfirmPassword(e){return $(e).val().length>0?$(e).val().trim()!=$("#txtPin").val().trim()?($(e).addClass("error"),$("#spnError").html("Pin and confirm pin does not match"),!1):($(e).removeClass("error"),$("#spnError").html(""),!0):($(e).addClass("error"),$("#spnError").html("Please enter confirm Pin"),!1)}function checkEmailExistance(e){var t=serviceUrl+"Account/IsUserWithSameEmailExist",i={};i.email=$("#txtEmail").val().trim(),$.ajax({type:"GET",url:t,data:i,async:!1,success:function(t){t.IsSuccessful?t.Result?toast("Email already registered"):register(e):toast("Network Error")},error:function(){toast("Network Error")}})}function restoreTheRegFields(){null!=jsonObj&&($("#ddlTitle").val(jsonObj.titleId).change(),$("#txtFirstName").val(jsonObj.FirstName),$("#txtMiddleName").val(jsonObj.MiddleName||""),$("#txtLastName").val(jsonObj.LastName),$("#txtDob").val(jsonObj.DOB),$("#txtEmail").val(jsonObj.Email),$("#street_number").val(jsonObj.StreetAddress),$("#locality").val(jsonObj.City),$("#postal_code").val(jsonObj.Postcode),$("#txtContact1").val(jsonObj.ContactNumber),$("#txtContact2").val(jsonObj.SecondaryContact||""),$("#ddlGender").val(jsonObj.GenderId),$("#txtPin,#txtCPin").val(jsonObj.Password),$("#administrative_area_level_1").val(jsonObj.State),jsonObj.IsPaySlipSent?$("#chkPaySlipMail").attr("checked",!0).checkboxradio("refresh"):$("#chkPaySlipMail").attr("checked",!1).checkboxradio("refresh"))}function register(e){var i=(serviceUrl+"Account/AddUser",$("#ddlTitle").val()),n=$("#txtFirstName").val(),r=$("#txtMiddleName").val(),a=$("#txtLastName").val(),o=$("#txtDob").val(),s=$("#txtEmail").val(),l=$("#street_number").val(),c=$("#locality").val(),u=$("#postal_code").val(),d=$("#txtContact1").val(),f=$("#txtContact2").val(),h=$("#ddlGender").val(),p=$("#txtPin").val(),m=$("#administrative_area_level_1").val(),g=$("#chkPaySlipMail").is(":checked")?!0:!1,v=$("#profilePicImg").attr("src"),y="Mr";switch(i){case"1":y="Mr";break;case"2":y="Mrs";break;case"3":y="Miss";break;case"4":y="Ms"}jsonObj.titleId=i,jsonObj.Title=y,jsonObj.FirstName=n,jsonObj.MiddleName=r,jsonObj.LastName=a,jsonObj.DOB=o,jsonObj.Email=s,jsonObj.StreetAddress=l,jsonObj.DeviceId=localStorage.pushRegID||"",jsonObj.DeviceTypeId="Android"==device.platform?2:1,jsonObj.City=c,jsonObj.State=m,jsonObj.Postcode=u,jsonObj.ContactNumber=d,jsonObj.SecondaryContact=f,jsonObj.IsPaySlipSent=g,jsonObj.GenderId=h,jsonObj.Password=p,jsonObj.UserLicenceTicketTypes=licenceTicketList,jsonObj.UserTradeExperiences=tradeExpList,jsonObj.UserPositionHelds=positionHoldList,jsonObj.ProfileImage="img/avtar.png"==v?"":v,navigatePage(e)}function submitProfile(){var e=serviceUrl+"Account/AddUser";jsonObj.UserLicenceTicketTypes=licenceTicketList,jsonObj.UserTradeExperiences=tradeExpList,jsonObj.UserPositionHelds=positionHoldList,jsonObj.ProfileImage=localStorage.ProfileImage||"",$.ajax({type:"POST",url:e,data:jsonObj,success:function(e){e.IsSuccessful?(navigatePage("#successfulRegPage"),localStorage.ProfileImage=""):toast("Network Error")},error:function(){}})}function RegisterUser(e){$(".required").each(function(){var e=this;return $(e).hasClass("error")?!1:void 0}),checkEmailExistance(e)}function setOptions(e){var t={quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:e,allowEdit:!0,correctOrientation:!0};return t}function openCameraOrGallery(e){"Camera.PictureSourceType.CAMERA"==e?e=Camera.PictureSourceType.CAMERA:"Camera.PictureSourceType.PHOTOLIBRARY"==e&&(e=Camera.PictureSourceType.PHOTOLIBRARY);var t=setOptions(e);navigator.camera.getPicture(cameraSuccess,cameraError,t)}function cameraSuccess(e){$("#profilePicImg").attr("src","data:image/jpeg;base64,"+e),localStorage.ProfileImage="data:image/jpeg;base64,"+e,$("#submitProfileBtn").show()}function cameraError(e){}function getActiveLicenceType(e){showWait();var t=serviceUrl+"Account/GetActiveLicenceTicketTypes";$.ajax({type:"GET",url:t,data:"",success:function(t){if(hideWait(),t.IsSuccessful){$("#ddlLicence").html("");for(var i='<option value="0">SELECT LICENCE</option>',n=t.Result,r=0;r<n.length;r++)n[r].ID===e?(i+="<option value="+n[r].ID+' selected="selected">'+n[r].Name+"</option>",$("#ddlLicence").prev().text(n[r].Name)):i+="<option value="+n[r].ID+">"+n[r].Name+"</option>";$("#ddlLicence").append(i)}},error:function(){hideWait(),toast("Network Error")}})}function getLicenceTypDetail(e){showWait();var t={};t.id=parseInt(e);var i=serviceUrl+"Account/GetLicenceTicketTypeById";$.ajax({type:"GET",url:i,data:t,success:function(e){if(hideWait(),e.IsSuccessful){var t=e.Result;$("#dvLicence").show(),$("#ddlLicenceText").val(t.Name),$("#licenceTypeh").text(t.LicenceAbbr),t.IsQualifiedAllowed?($("#dvLicence .exp").show(),$("#dvLicence .num").show(),$("#dvLicence .container").hide()):($("#dvLicence .container").show(),$("#dvLicence .exp").hide(),$("#dvLicence .num").hide())}},error:function(){hideWait(),toast("Network Error")}})}function getActiveTradeExp(e){showWait();var t=serviceUrl+"Account/GetActiveTradeExperiences";$.ajax({type:"GET",url:t,data:"",success:function(t){if(hideWait(),t.IsSuccessful){$("#ddlTradeExp").html("");for(var i='<option value="0">SELECT TRADE</option>',n=t.Result,r=0;r<n.length;r++)n[r].ID===e?(i+="<option value="+n[r].ID+' selected="selected">'+n[r].Name+"</option>",$("#ddlTradeExp").prev().text(n[r].Name)):i+="<option value="+n[r].ID+">"+n[r].Name+"</option>";$("#ddlTradeExp").append(i)}},error:function(){hideWait(),toast("Network Error")}})}function getTradeExpDetail(e){showWait();var t={};t.id=parseInt(e);var i=serviceUrl+"Account/GetTradeExperienceById";$.ajax({type:"GET",url:i,data:t,success:function(e){if(hideWait(),e.IsSuccessful){var t=e.Result;$("#ddlTradeExpText").val(t.Name),$("#dvTrade").show(),t.IsQualifiedAllowed?($("#dvTrade .exp").show(),$("#dvTrade .num").show(),$("#dvTrade .container").hide()):($("#dvTrade .container").show(),$("#dvTrade .num").hide())}},error:function(){hideWait(),toast("Network Error")}})}function getActivePositionHeld(e){showWait();var t=serviceUrl+"Account/GetActivePositionHelds";$.ajax({type:"GET",url:t,data:"",success:function(t){if(hideWait(),t.IsSuccessful){$("#ddlPositionHeld").html("");for(var i='<option value="0">SELECT POSITION</option>',n=t.Result,r=0;r<n.length;r++)n[r].ID==e?(i+="<option value="+n[r].ID+' selected="selected">'+n[r].Name+"</option>",$("#ddlPositionHeld").prev().text(n[r].Name)):i+="<option value="+n[r].ID+">"+n[r].Name+"</option>";$("#ddlPositionHeld").append(i)}},error:function(){hideWait(),toast("Network Error")}})}function getPositionHeldDetail(e){showWait();var t={};t.id=parseInt(e);var i=serviceUrl+"Account/GetPositionHeldById";$.ajax({type:"GET",url:i,data:t,success:function(e){if(hideWait(),e.IsSuccessful){var t=e.Result;$("#dvPosition").show(),$("#ddlPositionHeldText").val(t.Name),t.IsQualifiedAllowed?($("#dvPosition .exp").show(),$("#dvPosition .num").show(),$("#dvPosition .container").hide()):($("#dvPosition .container").show(),$("#dvPosition .exp").hide(),$("#dvPosition .num").hide())}},error:function(){hideWait(),toast("Network Error")}})}function deletePosition(e,t){var i=confirm("Are you sure?");if(i){showWait();var n={};n.Id=parseInt($("#hdnPositionId").val());for(var r=0;r<positionHoldList.length;r++)positionHoldList[r].Id==n.Id&&positionHoldList.splice(positionHoldList.indexOf(positionHoldList[r]),1);toast("Position Deleted Successfully"),listPositions(),hideWait()}}function deleteLicence(e,t){var i=confirm("Are you sure?");if(i){showWait();var n={};n.Id=parseInt($("#hdnLicenceTypeId").val());for(var r=0;r<licenceTicketList.length;r++)licenceTicketList[r].Id==n.Id&&licenceTicketList.splice(licenceTicketList.indexOf(licenceTicketList[r]),1);toast("Licence Ticket Type Deleted Successfully"),listTickets(),hideWait()}}function deleteTrade(e,t){var i=confirm("Are you sure?");if(i){showWait();var n={};n.Id=parseInt($("#hdnTradeId").val());for(var r=0;r<tradeExpList.length;r++)tradeExpList[r].Id==n.Id&&tradeExpList.splice(tradeExpList.indexOf(tradeExpList[r]),1);toast("Trade Experience Deleted"),listTrade(),hideWait()}}function SaveTrade(){var e=!0;if($(".tradeRequired").each(function(){var t=$(this);""==t.val()&&t.is(":visible")?($(t).addClass("error"),e=!1):$(t).removeClass("error")}),!e)return!1;var t={};t.Id=$("#hdnTradeId").val(),t.TradeExperienceId=$("#ddlTradeExp").val(),t.Name=$("#ddlTradeExpText").val(),t.Experience=$("#txtExpTrade").val(),t.QualificationNumber=$("#txtQualTrade").val(),t.UserCertificationTypeId=$("input[name=TradeExpPosition]:checked").val()||"","2"==t.UserCertificationTypeId?t.UserCertificationTypeName="Experienced":"1"==t.UserCertificationTypeId?t.UserCertificationTypeName="Qualified":(t.UserCertificationTypeName="Qualified",t.UserCertificationTypeId=1),AddUserTradeExp(t)}function SavePosition(){var e=!0;if($(".positionRequired").each(function(){var t=$(this);""==t.val()&&t.is(":visible")?($(t).addClass("error"),e=!1):$(t).removeClass("error")}),!e)return!1;var t={};t.Id=$("#hdnPositionId").val(),t.PositionHeldId=$("#ddlPositionHeld").val(),t.Name=$("#ddlPositionHeldText").val(),t.Experience=$("#txtExpPosition").val(),t.QualificationNumber=$("#txtQualPosition").val(),t.UserCertificationTypeId=$("input[name=CertifiedTypePosition]:checked").val(),"2"==t.UserCertificationTypeId?t.UserCertificationTypeName="Experienced":"1"==t.UserCertificationTypeId?t.UserCertificationTypeName="Qualified":(t.UserCertificationTypeName="Qualified",t.UserCertificationTypeId=1),AddUserPositionHeld(t)}function AddUserPositionHeld(e){showWait();for(var t=0;t<positionHoldList.length;t++)positionHoldList[t].Id===e.Id&&positionHoldList.splice(positionHoldList.indexOf(positionHoldList[t]),1);positionHoldList.push(e),"true"==localStorage.editPositionFlag?$("#hdnPositionId").val(parseInt(localStorage.positionIDSaved)+1):$("#hdnPositionId").val(parseInt($("#hdnPositionId").val())+1),listPositions(),hideWait(),$("input[type='text']").val("")}function listPositions(){var e="";if(null!=positionHoldList){for(var t=0;t<positionHoldList.length;t++){var i="",n=null!=positionHoldList[t].Experience&&"null"!=positionHoldList[t].Experience?positionHoldList[t].Experience:"",r=null!=positionHoldList[t].QualificationNumber&&"null"!=positionHoldList[t].QualificationNumber?positionHoldList[t].QualificationNumber:"";""==r&&(i="display:none"),e+='<li onclick="editPosition('+t+')">',e+='<table data-role="table" data-mode="" class="ui-responsive table-stroke"><tbody>',e+="<tr><td>"+positionHoldList[t].Name+"</td></tr>",e+="<tr><td>Certification Type</td><td>"+positionHoldList[t].UserCertificationTypeName+"</td></tr>",e+='<tr style="'+i+'"><td>Qualification No.</td><td>'+r+"</td></tr>",e+="<tr><td>Experience</td><td>"+n+"</td></tr>",e+="</tbody>",e+="</table></li><hr>"}$("#addPositionsPara").hide(),$("#positionsList").html(e).listview().listview("refresh")}0==positionHoldList.length&&$("#addPositionsPara").show(),$.mobile.pageContainer.pagecontainer("change","#positionsPage",{transition:"slide"})}function AddUserTradeExp(e){showWait();for(var t=0;t<tradeExpList.length;t++)tradeExpList[t].Id===e.Id&&tradeExpList.splice(tradeExpList.indexOf(tradeExpList[t]),1);tradeExpList.push(e),"true"==localStorage.editTradeFlag?$("#hdnTradeId").val(parseInt(localStorage.tradeIDSaved)+1):$("#hdnTradeId").val(parseInt($("#hdnTradeId").val())+1),listTrade(),hideWait(),$("input[type='text']").val("")}function listTrade(){var e="";if(null!=tradeExpList){for(var t=0;t<tradeExpList.length;t++){var i="",n=null!=tradeExpList[t].Experience&&"null"!=tradeExpList[t].Experience?tradeExpList[t].Experience:"",r=null!=tradeExpList[t].QualificationNumber&&""!=tradeExpList[t].QualificationNumber?tradeExpList[t].QualificationNumber:"";""==r&&(i="display:none"),e+='<li onclick="editTrade('+t+')">',e+='<table data-role="table" data-mode="" class="ui-responsive table-stroke"><tbody>',e+="<tr><td>"+tradeExpList[t].Name+"</td></tr>",e+="<tr><td>Certification Type</td><td>"+tradeExpList[t].UserCertificationTypeName+"</td></tr>",e+='<tr style="'+i+'"><td>Qualification No.</td><td>'+r+"</td></tr>",e+="<tr><td>Experience</td><td> "+n+"</td></tr>",e+="</tbody></table>",e+="</li><hr>"}$("#addTradePara").hide(),$("#tradeList").html(e).listview().listview("refresh")}0==tradeExpList.length&&$("#addTradePara").show(),$.mobile.pageContainer.pagecontainer("change","#experiencePage",{transition:"slide"})}function SaveLicence(){var e=!0;if($(".licenceRequired").each(function(){var t=$(this);""==t.val()&&t.is(":visible")?($(t).addClass("error"),e=!1):$(t).removeClass("error")}),!e)return!1;var t={};t.Id=$("#hdnLicenceTypeId").val(),t.LicenceTicketTypeId=$("#ddlLicence").val(),t.Name=$("#ddlLicenceText").val(),t.Experience=$("#txtExperience").val(),t.LicenceNumber=$("#txtNumberlLicence").val(),t.LicenceExpiry=$("#txtLicenceExpiry").val(),t.ExpiryDate=formatDate($("#txtLicenceExpiry").mobiscroll("getVal"),"/"),t.LicenceType=$("#licenceTypeh").text(),t.UserCertificationTypeId=$("input[name=LicencePosition]:checked").val(),"2"==t.UserCertificationTypeId?t.UserCertificationTypeName="Experienced":"1"==t.UserCertificationTypeId?t.UserCertificationTypeName="Qualified":(t.UserCertificationTypeName="Qualified",t.UserCertificationTypeId=1),AddUserLicenceTicketType(t)}function AddUserLicenceTicketType(e){showWait();for(var t=0;t<licenceTicketList.length;t++)licenceTicketList[t].Id===e.Id&&licenceTicketList.splice(licenceTicketList.indexOf(licenceTicketList[t]),1);licenceTicketList.push(e),"true"==localStorage.editLicenceFlag?$("#hdnLicenceTypeId").val(parseInt(localStorage.licenceIDSaved)+1):$("#hdnLicenceTypeId").val(parseInt($("#hdnLicenceTypeId").val())+1),listTickets(),hideWait(),$("input[type='text']").val("")}function listTickets(){var e="";if($("#addLicencePara").hide(),null!=licenceTicketList){for(var t=0;t<licenceTicketList.length;t++){var i="",n=null!=licenceTicketList[t].Experience&&""!=licenceTicketList[t].Experience?licenceTicketList[t].Experience:"",r=null!=licenceTicketList[t].LicenceNumber&&""!=licenceTicketList[t].LicenceNumber?licenceTicketList[t].LicenceNumber:"",a=null!=licenceTicketList[t].LicenceExpiry&&""!=licenceTicketList[t].LicenceExpiry?licenceTicketList[t].LicenceExpiry:"";""==r&&(a="",i="display:none"),e+='<li onclick="editLicence('+t+')">',e+='<table data-role="table" data-mode="" class="ui-responsive table-stroke"><tbody>',e+="<tr><td>"+licenceTicketList[t].Name+"</td></tr>",e+="<tr><td>Licence Type </td><td>"+licenceTicketList[t].LicenceType+"</td></tr>",e+='<tr style="'+i+'"><td>Licence No.</td><td>'+r+"</td></tr>",e+='<tr style="'+i+'"><td>Expiry</td><td>'+a+"</td></tr>",e+="<tr><td>Experience</td><td>"+n+"</td></tr>",e+="</tbody></table>",e+="</li><hr>"}$("#tblLicenceList").html(e).listview().listview("refresh")}0==licenceTicketList.length&&$("#addLicencePara").show(),$.mobile.pageContainer.pagecontainer("change","#licencePage",{transition:"slide"})}function resetTheHiddenID(e){"licencePage"==e?"true"==localStorage.editLicenceFlag&&($("#hdnLicenceTypeId").val(parseInt(localStorage.licenceIDSaved)),localStorage.editLicenceFlag=!1):"positionsPage"==e?"true"==localStorage.editPositionFlag&&($("#hdnPositionId").val(parseInt(localStorage.positionIDSaved)),localStorage.editPositionFlag="false"):"tradePage"==e&&"true"==localStorage.editTradeFlag&&($("#hdnTradeId").val(parseInt(localStorage.tradeIDSaved)),localStorage.editPositionFlag="false")}function makeEditFalse(e){var t=(new Date).getDate()+"/"+((new Date).getMonth()+1)+"/"+((new Date).getFullYear()+1);"editLicenceFlag"==e?(localStorage.editLicenceFlag="false",$("#txtNumberlLicence,#txtLicenceExpiry,#txtExperience").val(""),$("#txtLicenceExpiry").val(t),$("#delLicBtn").hide(),$("#addLicenceBtn").text("Add"),$("#ddlLicence").val("0").change(),$("#expLicence,#qualLicence").attr("checked",!1).checkboxradio("refresh"),$("#dvLicence").hide(),$("#dvLicence .num").hide(),$("#dvLicence .exp").hide()):"editTradeFlag"==e?(localStorage.editTradeFlag="false",$("#txtQualTrade,#txtExpTrade").val(""),$("#addTradeBtn").text("Add"),$("#delTradeBtn").hide(),$("#ddlTradeExp").val("0").change(),$("#expTrade,#qualTrade").attr("checked",!1).checkboxradio("refresh"),$("#dvTrade").hide(),$("#dvTrade .num").hide(),$("#dvTrade .exp").hide()):"editPositionFlag"==e&&(localStorage.editPositionFlag="false",$("#txtQualPosition,#txtExpPosition").val(""),$("#addPosBtn").text("Add"),$("#delPosBtn").hide(),$("#ddlPositionHeld").val("0").change(),$("#expPosition,#qualPosition").attr("checked",!1).checkboxradio("refresh"),$("#dvPosition").hide(),$("#dvPosition .num").hide(),$("#dvPosition .exp").hide())}function editLicence(e){showWait(),localStorage.editLicenceFlag="true";for(var t=0,i=0;i<licenceTicketList.length;i++)licenceTicketList[i].Id==e&&(t=i);$.mobile.pageContainer.pagecontainer("change","#addeditLicence",{transition:"slide"}),$("#addLicenceBtn").text("Update"),$("#delLicBtn").show(),getActiveLicenceType(licenceTicketList[t].LicenceTicketTypeId),localStorage.licenceIDSaved=$("#hdnLicenceTypeId").val(),$("#hdnLicenceTypeId").val(licenceTicketList[t].Id),$("#ddlLicence").val(licenceTicketList[t].LicenceTicketTypeId).selectmenu("refresh"),$("#txtExperience").val(licenceTicketList[t].Experience),$("#txtNumberlLicence").val(licenceTicketList[t].LicenceNumber),$("#txtLicenceExpiry").val(licenceTicketList[t].LicenceExpiry),$("#dvLicence").show(),$("#dvLicence .container").show(),$("#dvLicence .exp").show(),$("#expLicence,#qualLicence").attr("checked",!1).checkboxradio("refresh"),"2"==licenceTicketList[t].UserCertificationTypeId?($("#expLicence").attr("checked",!0).checkboxradio("refresh"),$("#expLicence").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvLicence .num").hide()):"1"==licenceTicketList[t].UserCertificationTypeId?($("#qualLicence").attr("checked",!0).checkboxradio("refresh"),$("#qualLicence").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvLicence .num").show()):($("#dvLicence .container").hide(),$("#dvLicence .num").show()),hideWait()}function editPosition(e){showWait(),localStorage.editPositionFlag="true";for(var t=0,i=0;i<positionHoldList.length;i++)positionHoldList[i].Id==e&&(t=i);$.mobile.pageContainer.pagecontainer("change","#addeditPosition",{transition:"slide"}),$("#addPosBtn").text("Update"),$("#delPosBtn").show(),localStorage.positionIDSaved=$("#hdnPositionId").val(),$("#hdnPositionId").val(positionHoldList[t].Id),getActivePositionHeld(positionHoldList[t].PositionHeldId),$("#ddlPositionHeld").val(positionHoldList[t].PositionHeldId),$("#txtExpPosition").val(positionHoldList[t].Experience),$("#txtQualPosition").val(positionHoldList[t].QualificationNumber),$("#dvPosition").show(),$("#dvPosition .container").show(),$("#dvPosition .exp").show(),$("#expPosition,#qualPosition").attr("checked",!1).checkboxradio("refresh"),"2"==positionHoldList[t].UserCertificationTypeId?($("#expPosition").attr("checked",!0).checkboxradio("refresh"),$("#expPosition").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvPosition .num").hide()):"1"==positionHoldList[t].UserCertificationTypeId?($("#qualPosition").attr("checked",!0).checkboxradio("refresh"),$("#qualPosition").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvPosition .num").show()):($("#dvPosition .container").hide(),$("#dvPosition .num").show()),hideWait()}function editTrade(e){localStorage.editTradeFlag="true",showWait();for(var t=0,i=0;i<tradeExpList.length;i++)tradeExpList[i].Id==e&&(t=i);$.mobile.pageContainer.pagecontainer("change","#addeditTrade",{transition:"slide"}),$("#addTradeBtn").text("Update"),$("#delTradeBtn").show(),localStorage.tradeIDSaved=$("#hdnTradeId").val(),$("#hdnTradeId").val(tradeExpList[t].Id),getActiveTradeExp(tradeExpList[t].TradeExperienceId),getTradeExpDetail(tradeExpList[t].TradeExperienceId),$("#ddlTradeExp").val(tradeExpList[t].TradeExperienceId),$("#txtExpTrade").val(tradeExpList[t].Experience),$("#txtQualTrade").val(tradeExpList[t].QualificationNumber),$("#dvTrade").show(),$("#dvTrade .container").show(),$("#dvTrade .exp").show(),$("#expTrade,#qualTrade").attr("checked",!1).checkboxradio("refresh"),"2"==tradeExpList[t].UserCertificationTypeId?($("#expTrade").attr("checked",!0).checkboxradio("refresh"),$("#expTrade").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvTrade .num").hide()):"1"==tradeExpList[t].UserCertificationTypeId?($("#qualTrade").attr("checked",!0).checkboxradio("refresh"),$("#qualTrade").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvTrade .num").show()):($("#dvTrade .container").hide(),$("#dvTrade .num").show()),hideWait()}function rebindGrids(){var e="",t="",i="";if(null!=positionHoldList)for(var n=0;n<positionHoldList.length;n++){var r=null!=positionHoldList[n].Experience&&"null"!=positionHoldList[n].Experience?positionHoldList[n].Experience:"",a=null!=positionHoldList[n].QualificationNumber&&"null"!=positionHoldList[n].QualificationNumber?positionHoldList[n].QualificationNumber:"";t+="<tr><td>"+positionHoldList[n].Name+"</td><td>"+r+"</td><td>"+a+'</td><td><a onclick="editPosition('+positionHoldList[n].Id+')">Edit</a></td><td><a onclick="deletePosition('+positionHoldList[n].Id+',this)">Delete</a></td></tr>'}if(null!=tradeExpList)for(var o=0;o<tradeExpList.length;o++){var s=null!=tradeExpList[o].Experience&&"null"!=tradeExpList[o].Experience?tradeExpList[o].Experience:"",l=null!=tradeExpList[o].QualificationNumber&&""!=tradeExpList[o].QualificationNumber?tradeExpList[o].QualificationNumber:"";i+="<tr><td>"+tradeExpList[o].Name+"</td><td>"+s+"</td><td>"+l+'</td><td><a onclick="editTrade('+tradeExpList[o].Id+')">Edit</a></td><td><a onclick="deleteTrade('+tradeExpList[o].Id+',this)">Delete</a></td></tr>'}if(null!=licenceTicketList)for(var c=0;c<licenceTicketList.length;c++){var s=null!=licenceTicketList[c].Experience&&""!=licenceTicketList[c].Experience?licenceTicketList[c].Experience:"",l=null!=licenceTicketList[c].LicenceNumber&&""!=licenceTicketList[c].LicenceNumber?licenceTicketList[c].LicenceNumber:"";e+="<tr><td>"+licenceTicketList[c].Name+"</td><td>"+s+"</td><td>"+l+'</td><td><a onclick="editLicence('+licenceTicketList[c].Id+')">Edit</a></td><td><a onclick="deleteLicence('+licenceTicketList[c].Id+',this)">Delete</a></td></tr>'}$("#tblLicenceList tbody").html(e),$("#tblTradeExpList tbody").html(i),$("#tblPositionList tbody").html(t)}var options={types:["geocode"],componentRestrictions:{country:"au"}},placeSearch,autocomplete,componentForm={street_number:"long_name",route:"long_name",locality:"long_name",administrative_area_level_1:"long_name",postal_code:"long_name"},jsonObj={},input=document.getElementById("keyword"),autocomplete=new google.maps.places.Autocomplete(input,options);autocomplete.addListener("place_changed",fillInAddress);var isValid=!0,positionHoldList=[],licenceTicketList=[],tradeExpList=[],licenceId=1,positionId=1,tradeExpId=1;$(function(){$("#txtDob,#txtLicenceExpiry").mobiscroll().date({lang:"en",theme:"android-holo-light",display:"bubble",display:"bottom",dateOrder:"ddMMyy",dateFormat:"dd/mm/yyyy",mode:"scroller",maxDate:new Date(2050,12,31)})}),$(document).on("ready",function(){$(".required").on("change",function(){var e=this;$(e).removeClass("error")}),$(document).on("click","#btnAddLicence",function(){$("#txtExperience").val(""),$("#txtNumberlLicence").val(""),$("#hdnLicenceTypeId").val(licenceId++),getActiveLicenceType(0),$("#expLicence").attr("checked",!1),$("#expLicence").prev().removeClass("ui-radio-on").addClass("ui-radio-off"),$("#qualLicence").attr("checked",!1),$("#qualLicence").prev().removeClass("ui-radio-on").addClass("ui-radio-off"),$.mobile.pageContainer.pagecontainer("change","#addeditLicence",{transition:"slide"})}),$(document).on("click","#btnAddTrade",function(){$("#txtExpTrade").val(""),$("#txtQualTrade").val(""),$("#hdnTradeId").val(tradeExpId++),getActiveTradeExp(0),$("#expTrade").attr("checked",!1),$("#expTrade").prev().removeClass("ui-radio-on").addClass("ui-radio-off"),$("#qualTrade").attr("checked",!1),$("#qualTrade").prev().removeClass("ui-radio-on").addClass("ui-radio-off"),$.mobile.pageContainer.pagecontainer("change","#addeditTrade",{transition:"slide"})}),$(document).on("click","#btnAddPosition",function(){$("#txtExpPosition").val(""),$("#txtQualPosition").val(""),$("#hdnPositionId").val(positionId++),getActivePositionHeld(0),$("#expPosition").attr("checked",!1),$("#expPosition").prev().removeClass("ui-radio-on").addClass("ui-radio-off"),$("#qualPosition").attr("checked",!1),$("#qualPosition").prev().removeClass("ui-radio-on").addClass("ui-radio-off"),$.mobile.pageContainer.pagecontainer("change","#addeditPosition",{transition:"slide"})}),$(document).on("change","#ddlLicence",function(){var e=$(this).val();getLicenceTypDetail(e)}),$(document).on("change","#ddlTradeExp",function(){var e=$(this).val();getTradeExpDetail(e)}),$(document).on("change","#ddlPositionHeld",function(){var e=$(this).val();getPositionHeldDetail(e)}),$(document).on("click","#dvLicence .ui-radio",function(){if($("#dvLicence .exp").show(),$("#txtExperience").val(""),$("#txtNumberlLicence").val(""),"1"==$(this).children("input[name=LicencePosition]").val())$("#dvLicence .num").show(),$("#dvLicence .exp").hide();else{var e=(new Date).getDate()+"/"+((new Date).getMonth()+1)+"/"+((new Date).getFullYear()+1);$("#txtLicenceExpiry").val(e),$("#dvLicence .exp").show(),$("#dvLicence .num").hide()}}),$("input[name='LicencePosition']").on("click",function(){$("#dvLicence .exp").show(),$("#txtExperience").val(""),$("#txtNumberlLicence").val(""),"1"==$(this).val()?($("#dvLicence .num").show(),$("#dvLicence .exp").show()):"2"==$(this).val()&&($("#dvLicence .exp").show(),$("#dvLicence .num").hide())}),$("input[name='TradeExpPosition']").on("click",function(){$("#dvTrade .exp").show(),$("#txtExpTrade").val(""),$("#txtQualTrade").val(""),"1"==$(this).val()?$("#dvTrade .num").show():"2"==$(this).val()&&$("#dvTrade .num").hide()}),$("input[name='CertifiedTypePosition']").on("click",function(){$("#dvPosition .exp").show(),$("#txtExpPosition").val(""),$("#txtQualPosition").val(""),"1"==$(this).val()?$("#dvPosition .num").show():"2"==$(this).val()&&$("#dvPosition .num").hide()})});