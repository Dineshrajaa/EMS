function setOptions(e){var t={quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:e,allowEdit:!0,correctOrientation:!0};return t}function openCameraOrGallery(e){"Camera.PictureSourceType.CAMERA"==e?e=Camera.PictureSourceType.CAMERA:"Camera.PictureSourceType.PHOTOLIBRARY"==e&&(e=Camera.PictureSourceType.PHOTOLIBRARY);var t=setOptions(e);navigator.camera.getPicture(cameraSuccess,cameraError,t)}function cameraSuccess(e){var e="data:image/jpeg;base64,"+e;$(".profileCircle").css("background-image","url("+e+")"),localStorage.ProfilePicture=e,updateProfilePicture()}function updateProfilePicture(){var e=serviceUrl+"Account/UpdateProfilePicture",t=new Object;t.UserId=$("#hdnUserId").val(),t.ProfileImage=localStorage.ProfilePicture||"",showWait(),$.ajax({type:"POST",url:e,data:t,success:function(e){if(hideWait(),e.IsSuccessful){$("#imgUserImage").attr("src",localStorage.ProfilePicture);var t=localStorage.getItem("userSession");t&&"undefined"!=t&&null!=t&&(t=JSON.parse(t),t.ProfilePicture=localStorage.ProfilePicture,localStorage.userSession=JSON.stringify(t)),localStorage.ProfilePicture="",toast("Profile Picture updated Successfully"),$("#profileDetailsPage,#avatarPage").unblock()}},error:function(e){hideWait(),$("#profileDetailsPage,#avatarPage").unblock()}})}function cameraError(e){}function validate(){return isValid=!0,$(".required").each(function(){var e=$(this);""==e.val()&&e.is(":visible")?($(e).addClass("error"),isValid=!1):$(e).removeClass("error")}),isValid?void UpdateUser():!1}function redirectWithTimeout(e){setTimeout(function(){window.location.href=e},5e3)}function fillInAddress(){var e=autocomplete.getPlace();for(var t in componentForm)"route"!=t&&(document.getElementById(t).value="",document.getElementById(t).disabled=!1);for(var i=0;i<e.address_components.length;i++){var n=e.address_components[i].types[0];if(componentForm[n]){if("route"==n){var r=e.address_components[i][componentForm[n]];document.getElementById("street_number").value+=" "+r,document.getElementById("street_number").value=document.getElementById("street_number").value.trim();continue}var r=e.address_components[i][componentForm[n]];document.getElementById(n).value=r}}}function blockIT(){$("#cameraTypeList").panel("open"),$("#profileDetailsPage").block({message:null})}function fetchProfileDetail(e){showWait();var t=serviceUrl+"Account/GetUserById",i={};i.userId=e,$.ajax({type:"GET",url:t,data:i,contentType:"application/json",dataType:"json",async:!1,success:function(e){if(e&&e.IsSuccessful){var t=e.Result;$("#hdnUserId").val(t.ID),$("#hdnRoleId").val(t.RoleId);var i=1;switch(t.Title){case"Mr":i=1;break;case"Mrs":i=2;break;case"Miss":i=3;break;case"Ms":i=4;break;default:i=1}null!=t.ProfilePicture&&-1==t.ProfilePicture.indexOf("data:image/jpeg;base64,")&&(t.ProfilePicture="data:image/jpeg;base64,"+t.ProfilePicture),$(".profileCircle").css("background-image","url("+t.ProfilePicture+")"),$("#ddlTitle").val(i),$("#ddlTitle").prev().text(t.Title),$("#txtFirstName").val(t.FirstName),$("#lblName").html(t.Title+" "+t.FirstName+"  "+t.LastName),$("#lblEnmployeeNumber").html(t.EmployeeNumber),$("#txtMiddleName").val(t.MiddleName),$("#txtLastName").val(t.LastName),$("#txtDob").mobiscroll().date({lang:"en",theme:"android-holo-light",display:"bubble",display:"bottom",dateOrder:"ddMMyy",dateFormat:"dd/mm/yyyy",mode:"scroller",maxDate:new Date(2050,12,31)}),$("#txtDob").mobiscroll("setValue",new Date(t.DateOfBirth),!0),$("#lblDob").html(new Date(t.DateOfBirth).getFormattedDateInddMMYY()),t.IsPaySlipSent?$("#lblElePayslips").text("Yes"):$("#lblElePayslips").text("No"),$("#ddlGender").val(t.GenderId);var n="Male";switch(t.GenderId){case 1:n="Not Specified";break;case 2:n="Male";break;case 3:n="Female";break;default:n="Male"}$("#ddlGender").prev().text(n),$("#lblGender").html(n),$("#street_number").val(t.StreetAddress),$("#locality").val(t.City),$("#lblAddr").html(t.StreetAddress+", "+t.City+", "+t.State+", "+t.Postcode),$("#lbllocality").html(t.City),$("#postal_code").val(t.Postcode),$("#lblpostal_code").html(t.Postcode),$("#lbladministrative_area_level_1").html(t.State),$("#administrative_area_level_1").val(t.State),$("#lblEmail").text(t.Email),$("#lblContact1").html(t.ContactNumber),$("#lblContact2").html(t.SecondaryContact),$("#txtContact1").val(t.ContactNumber),$("#txtContact2").val(t.SecondaryContact),t.IsPaySlipSent&&$("#chkPaySlipMail").attr("checked",!0).checkboxradio().checkboxradio("refresh")}else toast("Network Error");hideWait()},error:function(e){hideWait(),toast("Network Error")}})}function doEdit(){navigatePage("#editProfilePage")}function doUpdate(){showWait()}function UpdateUser(){var e=$("#hdnUserId").val(),t=$("#ddlTitle").val(),i="Mr";switch(t){case"1":i="Mr";break;case"2":i="Mrs";break;case"3":i="Miss";break;case"4":i="Ms"}var n=$("#txtFirstName").val(),r=$("#txtMiddleName").val(),a=$("#txtLastName").val(),o=$("#txtDob").val(),s=$("#street_number").val(),l=$("#locality").val(),c=$("#postal_code").val(),u=$("#txtContact1").val(),d=$("#txtContact2").val(),f=$("#ddlGender").val(),h=$("#administrative_area_level_1").val(),p=$("#txtPin").val(),m=$("#chkPaySlipMail").is(":checked")?!0:!1,g=$("#hdnRoleId").val(),v={};v.ID=e,v.Title=i,v.FirstName=n,v.MiddleName=r,v.LastName=a,v.DateOfBirth=o,v.DOB=o,v.StreetAddress=s,v.City=l,v.State=h,v.Postcode=c,v.ContactNumber=u,v.SecondaryContact=d,v.IsPaySlipSent=m,v.GenderId=f,v.roleId=g,v.Password=p,updateProfile(v)}function updateProfile(e){showWait();var t=serviceUrl+"Account/UpdateUser";$.ajax({type:"POST",url:t,data:e,success:function(t){hideWait();var i=localStorage.getItem("userSession"),n=JSON.parse(i);e.JobStatusType=n.JobStatusType,e.ProfilePicture=n.ProfilePicture;var r=JSON.stringify(e);localStorage.setItem("userSession",r),toast("Profile Update Sucessfully"),redirectWithTimeout("UpdateProfile.html")},error:function(){hideWait(),toast("Network Error")}})}function validateConfirmPassword(e){return $(e).val().length>0?$(e).val().trim()!=$("#txtPin").val().trim()?($(e).addClass("error"),$("#spnError").html("Pin and confirm pin does not match"),!1):($(e).removeClass("error"),$("#spnError").html(""),!0):($(e).addClass("error"),$("#spnError").html("Please enter confirm Pin"),!1)}function validatePassword(e){return $(e).val().length>0?$(e).val().length<4?($(e).addClass("error"),$("#spnError").html("Pin length should be equal to 4"),$(e).focus(),!1):($(e).removeClass("error"),$("#spnError").html(""),!0):($(e).addClass("error"),$("#spnError").html("Please enter Pin"),!1)}function prev(){$.mobile.pageContainer.pagecontainer("change","#updateProfile",{transition:"slide"})}function next(){$.mobile.pageContainer.pagecontainer("change","#updateProfile_part2",{transition:"slide"})}function getActiveLicenceType(e){showWait();var t=serviceUrl+"Account/GetActiveLicenceTicketTypes";$.ajax({type:"GET",url:t,data:"",success:function(t){if(hideWait(),t.IsSuccessful){$("#ddlLicence").html("");for(var i='<option value="0">SELECT LICENCE</option>',n=t.Result,r=0;r<n.length;r++)n[r].ID===e?(i+="<option value="+n[r].ID+' selected="selected">'+n[r].Name+"</option>",$("#ddlLicence").prev().text(n[r].Name)):i+="<option value="+n[r].ID+">"+n[r].Name+"</option>";$("#ddlLicence").append(i)}},error:function(){hideWait(),toast("Network Error")}})}function getLicenceTypDetail(e){showWait();var t={};t.id=parseInt(e);var i=serviceUrl+"Account/GetLicenceTicketTypeById";$.ajax({type:"GET",url:i,data:t,success:function(e){if(hideWait(),e.IsSuccessful){var t=e.Result;$("#dvLicence").show(),$("#licenceTypeh").text(e.LicenceAbbr),t.IsQualifiedAllowed?($("#dvLicence .exp").show(),$("#dvLicence .num").show(),$("#dvLicence .container").hide()):($("#dvLicence .container").show(),$("#dvLicence .exp").hide(),$("#dvLicence .num").hide())}},error:function(){hideWait(),toast("Network Error")}})}function getActiveLTP(){showWait();var e=serviceUrl+"Account/GetCertifications";$.ajax({type:"GET",url:e,data:"",success:function(e){if(hideWait(),console.warn("response:"+JSON.stringify(e)),e.IsSuccessful){var t=e.Result;if($("#ddlLicence,#ddlPositionHeld,#ddlTradeExp").html(""),t.LicenceTickets){for(var i=t.LicenceTickets,n='<option value="0" selected>Please Select</option>',r=0;r<i.length;r++)n+="<option value="+i[r].ID+">"+i[r].Name+"</option>";$("#ddlLicence").append(n)}if(t.PositionHelds){for(var i=t.PositionHelds,a='<option value="0" selected>Please Select</option>',r=0;r<i.length;r++)a+="<option value="+i[r].ID+">"+i[r].Name+"</option>";$("#ddlPositionHeld").append(a)}if(t.TradeExperiences){for(var i=t.TradeExperiences,o='<option value="0" selected>Please Select</option>',r=0;r<i.length;r++)o+="<option value="+i[r].ID+">"+i[r].Name+"</option>";$("#ddlTradeExp").append(o)}}},error:function(){hideWait(),toast("Network Error")}})}function getActiveTradeExp(e){showWait();var t=serviceUrl+"Account/GetActiveTradeExperiences";$.ajax({type:"GET",url:t,data:"",success:function(t){if(hideWait(),t.IsSuccessful){$("#ddlTradeExp").html("");for(var i='<option value="0">SELECT TRADE</option>',n=t.Result,r=0;r<n.length;r++)n[r].ID===e?(i+="<option value="+n[r].ID+' selected="selected">'+n[r].Name+"</option>",$("#ddlTradeExp").prev().text(n[r].Name)):i+="<option value="+n[r].ID+">"+n[r].Name+"</option>";$("#ddlTradeExp").append(i)}},error:function(){hideWait(),toast("Network Error")}})}function getTradeExpDetail(e){showWait();var t={};t.id=parseInt(e);var i=serviceUrl+"Account/GetTradeExperienceById";$.ajax({type:"GET",url:i,data:t,success:function(e){if(hideWait(),e.IsSuccessful){var t=e.Result;$("#dvTrade").show(),t.IsQualifiedAllowed?($("#dvTrade .exp").show(),$("#dvTrade .num").show(),$("#dvTrade .container").hide()):($("#dvTrade .container").show(),$("#dvTrade .exp").hide(),$("#dvTrade .num").hide())}},error:function(){hideWait(),toast("Network Error")}})}function getActivePositionHeld(e){showWait();var t=serviceUrl+"Account/GetActivePositionHelds";$.ajax({type:"GET",url:t,data:"",success:function(t){if(hideWait(),t.IsSuccessful){$("#ddlPositionHeld").html("");for(var i='<option value="0">SELECT POSITION</option>',n=t.Result,r=0;r<n.length;r++)n[r].ID===e?(i+="<option value="+n[r].ID+' selected="selected">'+n[r].Name+"</option>",$("#ddlPositionHeld").prev().text(n[r].Name)):i+="<option value="+n[r].ID+">"+n[r].Name+"</option>";$("#ddlPositionHeld").append(i)}},error:function(){hideWait(),toast("Network Error")}})}function getPositionHeldDetail(e){showWait();var t={};t.id=parseInt(e);var i=serviceUrl+"Account/GetPositionHeldById";$.ajax({type:"GET",url:i,data:t,success:function(e){if(hideWait(),e.IsSuccessful){var t=e.Result;$("#dvPosition").show(),t.IsQualifiedAllowed?($("#dvPosition .exp").show(),$("#dvPosition .num").show(),$("#dvPosition .container").hide()):($("#dvPosition .container").show(),$("#dvPosition .exp").hide(),$("#dvPosition .num").hide())}},error:function(){hideWait(),toast("Network Error")}})}function printPositionList(e,t,i){var n="";if(null!=e){for(var r=0;r<e.length;r++){var a="block",o=null!=e[r].Experience&&"null"!=e[r].Experience?e[r].Experience:"",s=null!=e[r].QualificationNumber&&"null"!=e[r].QualificationNumber?e[r].QualificationNumber:"";""==s&&(a="display:none"),n+='<li onclick="editPosition('+e[r].Id+')">',n+='<table data-role="table" data-mode="" class="ui-responsive table-stroke"><tbody>',n+="<tr><td>"+e[r].Name+"</td></tr>",n+="<tr><td>Certification Type</td><td>"+e[r].UserCertificationType+"</td></tr>",n+='<tr style="'+a+'"><td>Qualification No.</td><td>'+s+"</td></tr>",n+="<tr><td>Experience</td><td>"+o+"</td></tr>",n+="</tbody>",n+="</table></li><hr>"}$("#positionList").html(n).listview().listview("refresh"),printTradeList(t,i)}else printTradeList(t,i)}function printTradeList(e,t){var i="";if(null!=e){for(var n=0;n<e.length;n++){var r="",a=null!=e[n].Experience&&"null"!=e[n].Experience?e[n].Experience:"",o=null!=e[n].QualificationNumber&&""!=e[n].QualificationNumber?e[n].QualificationNumber:"";""==o&&(r="display:none"),i+='<li onclick="editTrade('+e[n].Id+')">',i+='<table data-role="table" data-mode="" class="ui-responsive table-stroke"><tbody>',i+="<tr><td>"+e[n].Name+"</td></tr>",i+="<tr><td>Certification Type</td><td>"+e[n].UserCertificationType+"</td></tr>",i+='<tr style="'+r+'"><td>Qualification No.</td><td>'+o+"</td></tr>",i+="<tr><td>Experience</td><td> "+a+"</td></tr>",i+="</tbody></table>",i+="</li><hr>"}$("#tradeList").html(i).listview().listview("refresh"),printLicenceList(t)}else printLicenceList(t)}function printLicenceList(e){var t="";if(null!=e){for(var i=0;i<e.length;i++){var n="",r=null!=e[i].Experience&&""!=e[i].Experience?e[i].Experience:"",a=null!=e[i].LicenceNumber&&""!=e[i].LicenceNumber?e[i].LicenceNumber:"",o=null!=e[i].LicenceExpiry&&""!=e[i].LicenceExpiry?e[i].LicenceExpiry:"";""==a?(o="",n="display:none"):o=""!=o?formatDate(o):"",t+='<li onclick="editLicence('+e[i].Id+')">',t+='<table data-role="table" data-mode="" class="ui-responsive table-stroke"><tbody>',t+="<tr><td>"+e[i].Name+"</td></tr>",t+="<tr><td>Licence Type </td><td>"+e[i].LicenceType||"</td></tr>",t+='<tr style="'+n+'"><td>Licence No.</td><td>'+a+"</td></tr>",t+='<tr style="'+n+'"><td>Expiry</td><td>'+o+"</td></tr>",t+="<tr><td>Experience</td><td>"+r+"</td></tr>",t+="</tbody></table>",t+="</li><hr>"}$("#licenceList").html(t).listview().listview("refresh")}}function GetEmployeeDetails(e){showWait();var t={};t.id=parseInt(e);var i=serviceUrl+"Account/GetEmployeeDetails";$.ajax({type:"GET",url:i,data:t,success:function(e){if(hideWait(),e.IsSuccessful){var t=e.Result,i=t.PositionHeldList,n=t.TradeExpList,r=t.LicenceTicketTypeList;printPositionList(i,n,r)}},error:function(){hideWait(),toast("Network Error")}})}function deletePosition(e){navigator.notification.confirm("Are you sure you want to delete this Position?",function(e){if(1==e){showWait();var t=parseInt(localStorage.selectedPosition),i=serviceUrl+"Account/DeleteUserPositionHeld/";$.ajax({type:"POST",url:i+t,data:{},success:function(e){hideWait(),e.IsSuccessful&&(toast("Position Deleted Successfully"),triggerEmployeedetails())},error:function(){hideWait(),toast("Network Error")}})}},"Dowells",["Delete","Cancel"])}function triggerEmployeedetails(){var e=localStorage.getItem("userSession");e&&"undefined"!=e&&(currentUser=JSON.parse(e),fetchProfileDetail(currentUser.ID),GetEmployeeDetails(currentUser.ID))}function deleteLicence(e){navigator.notification.confirm("Are you sure you want to delete this Licence?",function(e){if(1==e){showWait();var t=parseInt(localStorage.selectedTicket),i=serviceUrl+"Account/DeleteUserLicenceTicketType/";$.ajax({type:"POST",url:i+t,data:{},success:function(e){hideWait(),e.IsSuccessful&&(toast("Licence Ticket Type Deleted Successfully"),triggerEmployeedetails())},error:function(){hideWait(),toast("Network Error")}})}},"Dowells",["Delete","Cancel"])}function deleteTrade(e){navigator.notification.confirm("Are you sure you want to delete this Trade?",function(e){if(1==e){showWait();var t=parseInt(localStorage.selectedTradeID),i=serviceUrl+"Account/DeleteUserTradeExp/";$.ajax({type:"POST",url:i+t,data:{},success:function(e){hideWait(),e.IsSuccessful&&(toast("Trade Exp Deleted Successfully"),triggerEmployeedetails())},error:function(){hideWait(),toast("Network Error")}})}},"Dowells",["Delete","Cancel"])}function SaveLicence(){var e=!0;if($(".licenceRequired").each(function(){console.warn($(this));var t=$(this);""==t.val()&&t.is(":visible")?($(t).addClass("error"),e=!1):$(t).removeClass("error")}),!e)return!1;var t={};t.Id=$("#hdnLicenceTypeId").val(),t.LicenceTicketTypeId=$("#ddlLicence").val(),t.UserId=currentUser.ID,t.Name=$("#ddlLicenceText").val(),t.Experience=$("#txtExperience").val(),t.LicenceNumber=$("#txtNumberlLicence").val(),t.LicenceExpiry=convertUIDateToDb($("#txtLicenceExpiry").mobiscroll("getVal")),t.ExpiryDate=formatDate($("#txtLicenceExpiry").mobiscroll("getVal"),"/"),t.LicenceType=$("#licenceTypeh").text(),t.UserCertificationTypeId=$("input[name=LicencePosition]:checked").val(),"2"==t.UserCertificationTypeId?t.UserCertificationTypeName="Experienced":"1"==t.UserCertificationTypeId?t.UserCertificationTypeName="Qualified":(t.UserCertificationTypeName="Qualified",t.UserCertificationTypeId=2),AddUserLicenceTicketType(t)}function SaveTrade(){var e=!0;if($(".tradeRequired").each(function(){console.warn($(this));var t=$(this);""==t.val()&&t.is(":visible")?($(t).addClass("error"),e=!1):$(t).removeClass("error")}),!e)return!1;var t={};t.Id=$("#hdnTradeId").val(),t.TradeExperienceId=$("#ddlTradeExp").val(),t.UserId=currentUser.ID,t.Name=$("#ddlTradeExpText").val(),t.Experience=$("#txtExpTrade").val(),t.QualificationNumber=$("#txtQualTrade").val(),t.UserCertificationTypeId=$("input[name=TradeExpPosition]:checked").val()||"","2"==t.UserCertificationTypeId?t.UserCertificationTypeName="Experienced":"1"==t.UserCertificationTypeId?t.UserCertificationTypeName="Qualified":(t.UserCertificationTypeName="Qualified",t.UserCertificationTypeId=2),AddUserTradeExp(t)}function SavePosition(){var e=!0;if($(".positionRequired").each(function(){console.warn($(this));var t=$(this);""==t.val()&&t.is(":visible")?($(t).addClass("error"),e=!1):$(t).removeClass("error")}),!e)return!1;var t={};t.Id=$("#hdnPositionId").val(),t.PositionHeldId=$("#ddlPositionHeld").val(),t.UserId=currentUser.ID,t.Name=$("#ddlPositionHeldText").val(),t.Experience=$("#txtExpPosition").val(),t.QualificationNumber=$("#txtQualPosition").val(),t.UserCertificationTypeId=$("input[name=CertifiedTypePosition]:checked").val(),"2"==t.UserCertificationTypeId?t.UserCertificationTypeName="Experienced":"1"==t.UserCertificationTypeId?t.UserCertificationTypeName="Qualified":(t.UserCertificationTypeName="Qualified",t.UserCertificationTypeId=2),AddUserPositionHeld(t)}function getEmpDetails(){triggerEmployeedetails(),navigatePage("#listOfDetailsPage")}function AddUserPositionHeld(e){showWait();var t=serviceUrl+"Account/AddUserPositionHeld";$.ajax({type:"POST",url:t,data:e,success:function(e){hideWait(),e.IsSuccessful&&(toast("Position Updated Successfully"),$("#ddlPositionHeld").val("0").change(),$("#txtQualPosition,#txtExpPosition").val(""),$(".num,.exp").hide(),$("input[name='CertifiedTypePosition']").removeAttr("checked").checkboxradio().checkboxradio("refresh"),getEmpDetails())},error:function(){hideWait(),toast("Network Error")}})}function AddUserTradeExp(e){showWait();var t=serviceUrl+"Account/AddUserTradeExp";$.ajax({type:"POST",url:t,data:e,success:function(e){hideWait(),e.IsSuccessful&&("true"==localStorage.ueditTradeFlag?$("#hdnTradeId").val(parseInt(localStorage.utradeIDSaved)+1):$("#hdnTradeId").val(parseInt($("#hdnTradeId").val())+1),toast("Trade Updated Successfully"),$("#ddlTradeExp").val("0").change(),$("#txtQualTrade,#txtExpTrade").val(""),$(".num,.exp").hide(),$("input[name='TradeExpPosition']").removeAttr("checked").checkboxradio().checkboxradio("refresh"),getEmpDetails())},error:function(){hideWait(),toast("Network Error")}})}function AddUserLicenceTicketType(e){showWait();var t=serviceUrl+"Account/AddUserLicenceTicketType";$.ajax({type:"POST",url:t,data:e,success:function(e){hideWait(),e.IsSuccessful&&("true"==localStorage.ueditLicenceFlag?$("#hdnLicenceTypeId").val(parseInt(localStorage.ulicenceIDSaved)+1):$("#hdnLicenceTypeId").val(parseInt($("#hdnLicenceTypeId").val())+1),toast("Licence Updated Successfully"),$("#ddlLicence").val("0").change(),$("#txtNumberlLicence,#txtLicenceExpiry,#txtExperience").val(""),$(".num,.exp").hide(),$("input[name='LicencePosition']").removeAttr("checked").checkboxradio().checkboxradio("refresh"),getEmpDetails())},error:function(){hideWait(),toast("Network Error")}})}function editLicence(e){localStorage.ueditLicenceFlag="true",showWait();var t=serviceUrl+"Account/GetUserLicenceTicketType/";localStorage.selectedTicket=e,$.ajax({type:"GET",url:t+e,data:{},success:function(e){hideWait(),e.IsSuccessful&&($.mobile.pageContainer.pagecontainer("change","#addeditLicence",{transition:"slide"}),$("#addLicenceBtn").text("Update"),$("#delLicBtn").show(),getActiveLicenceType(e.Result.LicenceTicketTypeId),localStorage.ulicenceIDSaved=$("#hdnLicenceTypeId").val(),$("#hdnLicenceTypeId").val(e.Result.Id),$("#ddlLicence").val(e.Result.LicenceTicketTypeId).selectmenu("refresh").change(),$("#txtExperience").val(e.Result.Experience),$("#txtNumberlLicence").val(e.Result.LicenceNumber),$("#txtLicenceExpiry").val(formatDate(e.Result.LicenceExpiry)),$("#dvLicence").show(),$("#dvLicence .container").show(),$("#dvLicence .exp").show(),$("#expLicence,#qualLicence").attr("checked",!1).checkboxradio().checkboxradio("refresh"),"2"==e.Result.UserCertificationTypeId?($("#expLicence").attr("checked",!0).checkboxradio().checkboxradio("refresh"),$("#expLicence").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvLicence .num").hide()):"1"==e.Result.UserCertificationTypeId?($("#qualLicence").attr("checked",!0).checkboxradio().checkboxradio("refresh"),$("#qualLicence").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvLicence .num").show()):($("#dvLicence .container").hide(),$("#dvLicence .num").show()))},error:function(){hideWait(),toast("Network Error")}})}function editPosition(e){showWait();var t=serviceUrl+"Account/GetUserPositionHeld/";localStorage.selectedPosition=e,$.ajax({type:"GET",url:t+e,data:{},success:function(e){hideWait(),e.IsSuccessful&&($.mobile.pageContainer.pagecontainer("change","#addeditPosition",{transition:"slide"}),$("#addPosBtn").text("Update"),$("#delPosBtn").show(),localStorage.upositionIDSaved=$("#hdnPositionId").val(),$("#hdnPositionId").val(e.Result.Id),getActivePositionHeld(e.Result.PositionHeldId),$("#ddlPositionHeld").val(e.Result.PositionHeldId),$("#txtExpPosition").val(e.Result.Experience),$("#txtQualPosition").val(e.Result.QualificationNumber),$("#dvPosition").show(),$("#dvPosition .container").show(),$("#dvPosition .exp").show(),$("#expPosition,#qualPosition").attr("checked",!1).checkboxradio().checkboxradio("refresh"),"2"==e.Result.UserCertificationTypeId?($("#expPosition").attr("checked",!0).checkboxradio().checkboxradio("refresh"),$("#expPosition").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvPosition .num").hide()):"1"==e.Result.UserCertificationTypeId?($("#qualPosition").attr("checked",!0).checkboxradio().checkboxradio("refresh"),$("#qualPosition").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvPosition .num").show()):($("#dvPosition .container").hide(),$("#dvPosition .num").show()))},error:function(){hideWait(),toast("Network Error")}})}function editTrade(e){showWait(),localStorage.selectedTradeID=e;var t=serviceUrl+"Account/GetUserTradeExp/";$.ajax({type:"GET",url:t+e,data:{},success:function(e){hideWait(),e.IsSuccessful&&($.mobile.pageContainer.pagecontainer("change","#addeditTrade",{transition:"slide"}),$("#addTradeBtn").text("Update"),$("#delTradeBtn").show(),localStorage.utradeIDSaved=$("#hdnTradeId").val(),$("#hdnTradeId").val(e.Result.Id),getActiveTradeExp(e.Result.TradeExperienceId),getTradeExpDetail(e.Result.TradeExperienceId),$("#ddlTradeExp").val(e.Result.TradeExperienceId),$("#txtExpTrade").val(e.Result.Experience),$("#txtQualTrade").val(e.Result.QualificationNumber),$("#dvTrade").show(),$("#dvTrade .container").show(),$("#dvTrade .exp").show(),$("#expTrade,#qualTrade").attr("checked",!1).checkboxradio().checkboxradio("refresh"),"1"==e.Result.UserCertificationTypeId?($("#expTrade").attr("checked",!0).checkboxradio().checkboxradio("refresh"),$("#expTrade").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvTrade .num").hide()):"2"==e.Result.UserCertificationTypeId?($("#qualTrade").attr("checked",!0).checkboxradio().checkboxradio("refresh"),$("#qualTrade").prev().removeClass("ui-radio-off").addClass("ui-radio-on"),$("#dvTrade .num").show()):($("#dvTrade .container").hide(),$("#dvTrade .num").show()))},error:function(){hideWait(),toast("Network Error")}})}function makeEditFalse(e){(new Date).getDate()+"/"+((new Date).getMonth()+1)+"/"+((new Date).getFullYear()+1);"editLicenceFlag"==e?(localStorage.ueditLicenceFlag="false",$("#txtNumberlLicence,#txtLicenceExpiry,#txtExperience").val(""),$("#delLicBtn").hide(),$("#addLicenceBtn").text("Add"),$("#ddlLicence").val("0").change(),$("#expLicence,#qualLicence").attr("checked",!1).checkboxradio().checkboxradio("refresh"),$("#dvLicence").hide(),$("#dvLicence .num").hide(),$("#dvLicence .exp").hide(),navigatePage("#addeditLicence")):"editTradeFlag"==e?(localStorage.ueditTradeFlag="false",$("#txtQualTrade,#txtExpTrade").val(""),$("#addTradeBtn").text("Add"),$("#delTradeBtn").hide(),$("#ddlTradeExp").val("0").change(),$("#expTrade,#qualTrade").attr("checked",!1).checkboxradio().checkboxradio("refresh"),$("#dvTrade").hide(),$("#dvTrade .num").hide(),$("#dvTrade .exp").hide(),navigatePage("#addeditTrade")):"editPositionFlag"==e&&(localStorage.ueditPositionFlag="false",$("#txtQualPosition,#txtExpPosition").val(""),$("#addPosBtn").text("Add"),$("#delPosBtn").hide(),$("#ddlPositionHeld").val("0").change(),$("#expPosition,#qualPosition").attr("checked",!1).checkboxradio().checkboxradio("refresh"),$("#dvPosition").hide(),$("#dvPosition .num").hide(),$("#dvPosition .exp").hide(),navigatePage("#addeditPosition"))}function resetTheHiddenID(e){"licencePage"==e?"true"==localStorage.ueditLicenceFlag&&($("#hdnLicenceTypeId").val(parseInt(localStorage.ulicenceIDSaved)),localStorage.ueditLicenceFlag=!1):"positionsPage"==e?"true"==localStorage.ueditPositionFlag&&($("#hdnPositionId").val(parseInt(localStorage.upositionIDSaved)),localStorage.ueditPositionFlag="false"):"tradePage"==e&&"true"==localStorage.ueditTradeFlag&&($("#hdnTradeId").val(parseInt(localStorage.utradeIDSaved)),localStorage.ueditPositionFlag="false")}var isValid=!0,options={types:["geocode"],componentRestrictions:{country:"au"}},placeSearch,autocomplete,componentForm={street_number:"long_name",route:"long_name",locality:"long_name",administrative_area_level_1:"long_name",postal_code:"long_name"},input=document.getElementById("keyword"),autocomplete=new google.maps.places.Autocomplete(input,options);autocomplete.addListener("place_changed",fillInAddress);var trannieProfileObj="",currentUser="";$(document).on("ready",function(){var e=localStorage.getItem("userSession");e&&"undefined"!=e&&(currentUser=JSON.parse(e),fetchProfileDetail(currentUser.ID),GetEmployeeDetails(currentUser.ID),fillProfilePicture()),getActiveLTP(),$(document).on("change","#ddlLicence",function(){var e=$(this).val();getLicenceTypDetail(e)}),$(document).on("change","#ddlTradeExp",function(){var e=$(this).val();getTradeExpDetail(e)}),$(document).on("change","#ddlPositionHeld",function(){var e=$(this).val();getPositionHeldDetail(e)}),$(document).on("click","#btnAddLicence",function(){$("#txtExperience").val(""),$("#txtNumberlLicence").val(""),$.mobile.pageContainer.pagecontainer("change","#addeditLicence",{transition:"slide"})}),$(document).on("click","#btnAddTrade",function(){$("#txtExpTrade").val(""),$("#txtQualTrade").val(""),$.mobile.pageContainer.pagecontainer("change","#addeditTrade",{transition:"slide"})}),$(document).on("click","#btnAddPosition",function(){$("#txtExpPosition").val(""),$("#txtQualPosition").val(""),$.mobile.pageContainer.pagecontainer("change","#addeditPosition",{transition:"slide"})}),$("input[name='TradeExpPosition']").on("click",function(){$("#dvTrade .exp").show(),"1"==$(this).val()?$("#dvTrade .num").show():"2"==$(this).val()&&$("#dvTrade .num").hide()}),$("input[name='CertifiedTypePosition']").on("click",function(){$("#dvPosition .exp").show(),"1"==$(this).val()?$("#dvPosition .num").show():"2"==$(this).val()&&$("#dvPosition .num").hide()})}),$(function(){$("#txtDob,#txtLicenceExpiry").mobiscroll().date({lang:"en",theme:"android-holo-light",display:"bubble",display:"bottom",dateOrder:"ddMMyy",dateFormat:"dd/mm/yyyy",mode:"scroller",maxDate:new Date(2050,12,31)})}),$("input[name='LicencePosition']").on("click",function(){$("#dvLicence .exp").show(),console.warn($(this).val()),"1"==$(this).val()?($("#dvLicence .num").show(),$("#dvLicence .exp").show()):"2"==$(this).val()&&($("#dvLicence .exp").show(),$("#dvLicence .num").hide())});